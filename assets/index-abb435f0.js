import{r as e,D as t,C as o,I as i,T as n,R as a,F as r}from"./deck-68cb15df.js";import{r as s,_ as l}from"./vendor-8b0cae8e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var c={exports:{}},d={},u=e,h=Symbol.for("react.element"),p=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,g=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function v(e,t,o){var i,n={},a=null,r=null;for(i in void 0!==o&&(a=""+o),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(r=t.ref),t)m.call(t,i)&&!f.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===n[i]&&(n[i]=t[i]);return{$$typeof:h,type:e,key:a,ref:r,props:n,_owner:g.current}}d.Fragment=p,d.jsx=v,d.jsxs=v,c.exports=d;var y=c.exports,b={},x=s;b.createRoot=x.createRoot,b.hydrateRoot=x.hydrateRoot;const w=e.createContext(null);function _(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!_(e[o],t[o]))return!1;return!0}if(Array.isArray(t))return!1;if("object"==typeof e&&"object"==typeof t){const o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(const n of o){if(!t.hasOwnProperty(n))return!1;if(!_(e[n],t[n]))return!1}return!0}return!1}function S(e,t){if(!e.getProjection)return;const o=e.getProjection();_(o,t.getProjection())||t.setProjection(o)}function k(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function P(e,t){const o=t.viewState||t;let i=!1;if("zoom"in o){const t=e.zoom;e.zoom=o.zoom,i=i||t!==e.zoom}if("bearing"in o){const t=e.bearing;e.bearing=o.bearing,i=i||t!==e.bearing}if("pitch"in o){const t=e.pitch;e.pitch=o.pitch,i=i||t!==e.pitch}if(o.padding&&!e.isPaddingEqual(o.padding)&&(i=!0,e.padding=o.padding),"longitude"in o&&"latitude"in o){const t=e.center;e.center=new t.constructor(o.longitude,o.latitude),i=i||t!==e.center}return i}const C=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function E(e){if(!e)return null;if("string"==typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const i of e.layers)t[i.id]=i;const o=e.layers.map((e=>{let o=null;"interactive"in e&&(o=Object.assign({},e),delete o.interactive);const i=t[e.ref];if(i){o=o||Object.assign({},e),delete o.ref;for(const e of C)e in i&&(o[e]=i[e])}return o||e}));return{...e,layers:o}}const M={version:8,sources:{},layers:[]},T={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},L={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},z={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},I=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],j=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class A{constructor(e,t,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[z[e.type]];t?t(e):e.type},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[T[e.type]];t&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[L[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const o=this._updateSettings(e,t);o&&this._createShadowTransform(this._map);const i=this._updateSize(e),n=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(o||i||n&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const o=A.savedMaps.pop();if(!o)return null;const i=o.map,n=i.getContainer();for(t.className=n.className;n.childNodes.length>0;)t.appendChild(n.childNodes[0]);i._container=t;const a=i._resizeObserver;a&&(a.disconnect(),a.observe(t)),o.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:r}=e;return r&&(r.bounds?i.fitBounds(r.bounds,{...r.fitBoundsOptions,duration:0}):o._updateViewState(r,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",(()=>i.fire("load"))),i._update(),o}_initialize(e){const{props:t}=this,{mapStyle:o=M}=t,i={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||H()||null,container:e,style:E(o)},n=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[n.longitude||0,n.latitude||0],zoom:n.zoom||0,pitch:n.pitch||0,bearing:n.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const a=new this._MapClass(i);n.padding&&a.setPadding(n.padding),t.cursor&&(a.getCanvas().style.cursor=t.cursor),this._createShadowTransform(a);const r=a._render;a._render=e=>{this._inRender=!0,r.call(a,e),this._inRender=!1};const s=a._renderTaskQueue.run;a._renderTaskQueue.run=e=>{s.call(a._renderTaskQueue,e),this._onBeforeRepaint()},a.on("render",(()=>this._onAfterRepaint()));const l=a.fire;a.fire=this._fireEvent.bind(this,l),a.on("resize",(()=>{this._renderTransform.resize(a.transform.width,a.transform.height)})),a.on("styledata",(()=>{this._updateStyleComponents(this.props,{}),S(a.transform,this._renderTransform)})),a.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const c in T)a.on(c,this._onPointerEvent);for(const c in L)a.on(c,this._onCameraEvent);for(const c in z)a.on(c,this._onEvent);this._map=a}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");null==e||e.remove(),A.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const o=this._map,i=this._renderTransform,{zoom:n,pitch:a,bearing:r}=i,s=o.isMoving();s&&(i.cameraElevationReference="sea");const l=P(i,{...k(o.transform),...e});if(s&&(i.cameraElevationReference="ground"),l&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=n!==i.zoom),e.rotate||(e.rotate=r!==i.bearing),e.pitch||(e.pitch=a!==i.pitch)}return s||P(o.transform,e),l}_updateSettings(e,t){const o=this._map;let i=!1;for(const n of I)if(n in e&&!_(e[n],t[n])){i=!0;const t=o[`set${n[0].toUpperCase()}${n.slice(1)}`];null==t||t.call(o,e[n])}return i}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){const{mapStyle:t=M,styleDiffing:o=!0}=e,i={diff:o};return"localIdeographFontFamily"in e&&(i.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(E(t),i),!0}return!1}_updateStyleComponents(e,t){const o=this._map;let i=!1;return o.isStyleLoaded()&&("light"in e&&o.setLight&&!_(e.light,t.light)&&(i=!0,o.setLight(e.light)),"fog"in e&&o.setFog&&!_(e.fog,t.fog)&&(i=!0,o.setFog(e.fog)),"terrain"in e&&o.setTerrain&&!_(e.terrain,t.terrain)&&(e.terrain&&!o.getSource(e.terrain.source)||(i=!0,o.setTerrain(e.terrain)))),i}_updateHandlers(e,t){var o,i;const n=this._map;let a=!1;for(const r of j){const s=null===(o=e[r])||void 0===o||o;_(s,null===(i=t[r])||void 0===i||i)||(a=!0,s?n[r].enable(s):n[r].disable())}return a}_queryRenderedFeatures(e){const t=this._map,o=t.transform,{interactiveLayerIds:i=[]}=this.props;try{return t.transform=this._renderTransform,t.queryRenderedFeatures(e,{layers:i.filter(t.getLayer.bind(t))})}catch(n){return[]}finally{t.transform=o}}_updateHover(e){var t;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const o=e.type,i=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0,n=this._queryRenderedFeatures(e.point),a=n.length>0;!a&&i&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=n,a&&!i&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=o}else this._hoveredFeatures=null}_fireEvent(e,t,o){const i=this._map,n=i.transform,a="string"==typeof t?t:t.type;return"move"===a&&this._updateViewState(this.props,!1),a in L&&("object"==typeof t&&(t.viewState=k(n)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,t,o),i.transform=n,i):(e.call(i,t,o),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&e.fire(o);this._internalUpdate=!1;const t=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{S(this._renderTransform,t),e.transform=t}}}function H(){let e=null;if("undefined"!=typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch(t){}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(o){}return e}A.savedMaps=[];const O=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function N(e){if(!e)return null;const t=e.map,o={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:o=>{const i=t.transform;t.transform=e.transform;const n=t.project(o);return t.transform=i,n},unproject:o=>{const i=t.transform;t.transform=e.transform;const n=t.unproject(o);return t.transform=i,n},queryTerrainElevation:(o,i)=>{const n=t.transform;t.transform=e.transform;const a=t.queryTerrainElevation(o,i);return t.transform=n,a},queryRenderedFeatures:(o,i)=>{const n=t.transform;t.transform=e.transform;const a=t.queryRenderedFeatures(o,i);return t.transform=n,a}};for(const i of function(e){const t=new Set;let o=e;for(;o;){for(const i of Object.getOwnPropertyNames(o))"_"!==i[0]&&"function"==typeof e[i]&&"fire"!==i&&"setEventedParent"!==i&&t.add(i);o=Object.getPrototypeOf(o)}return Array.from(t)}(t))i in o||O.includes(i)||(o[i]=t[i].bind(t));return o}const R="undefined"!=typeof document?e.useLayoutEffect:e.useEffect,D=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const B=e.createContext(null);function U(t,o,i){const n=e.useContext(w),[a,r]=e.useState(null),s=e.useRef(),{current:l}=e.useRef({mapLib:null,map:null});e.useEffect((()=>{const e=t.mapLib;let o,a=!0;return Promise.resolve(e||i).then((e=>{if(!a)return;if(!e)throw new Error("Invalid mapLib");const i="Map"in e?e:e.default;if(!i.Map)throw new Error("Invalid mapLib");if(function(e,t){for(const i of D)i in t&&(e[i]=t[i]);const{RTLTextPlugin:o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;o&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(o,(e=>{}),!0)}(i,t),i.supported&&!i.supported(t))throw new Error("Map is not supported by this browser");t.reuseMaps&&(o=A.reuse(t,s.current)),o||(o=new A(i.Map,t,s.current)),l.map=N(o),l.mapLib=i,r(o),null==n||n.onMapMount(l.map,t.id)})).catch((e=>{const{onError:o}=t;o&&o({type:"error",target:null,originalEvent:null,error:e})})),()=>{a=!1,o&&(null==n||n.onMapUnmount(t.id),t.reuseMaps?o.recycle():o.destroy())}}),[]),R((()=>{a&&a.setProps(t)})),e.useImperativeHandle(o,(()=>l.map),[a]);const c=e.useMemo((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return e.createElement("div",{id:t.id,ref:s,style:c},a&&e.createElement(B.Provider,{value:l},e.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},t.children)))}const F=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function W(e,t){if(!e||!t)return;const o=e.style;for(const i in t){const e=t[i];Number.isFinite(e)&&!F.test(i)?o[i]=`${e}px`:o[i]=e}}function Z(e){return new Set(e?e.trim().split(/\s+/):[])}function J(t,o,i,n){const a=e.useContext(B),r=e.useMemo((()=>t(a)),[]);return e.useEffect((()=>{const e=n||i||o,t="function"==typeof o&&"function"==typeof i?o:null,s="function"==typeof i?i:"function"==typeof o?o:null,{map:l}=a;return l.hasControl(r)||(l.addControl(r,null==e?void 0:e.position),t&&t(a)),()=>{s&&s(a),l.hasControl(r)&&l.removeControl(r)}}),[]),r}e.memo(e.forwardRef((function(t,o){const{map:i,mapLib:n}=e.useContext(B),a=e.useRef({props:t});a.current.props=t;const r=e.useMemo((()=>{let o=!1;e.Children.forEach(t.children,(e=>{e&&(o=!0)}));const i={...t,element:o?document.createElement("div"):null},s=new n.Marker(i);return s.setLngLat([t.longitude,t.latitude]),s.getElement().addEventListener("click",(e=>{var t,o;null===(o=(t=a.current.props).onClick)||void 0===o||o.call(t,{type:"click",target:s,originalEvent:e})})),s.on("dragstart",(e=>{var t,o;const i=e;i.lngLat=r.getLngLat(),null===(o=(t=a.current.props).onDragStart)||void 0===o||o.call(t,i)})),s.on("drag",(e=>{var t,o;const i=e;i.lngLat=r.getLngLat(),null===(o=(t=a.current.props).onDrag)||void 0===o||o.call(t,i)})),s.on("dragend",(e=>{var t,o;const i=e;i.lngLat=r.getLngLat(),null===(o=(t=a.current.props).onDragEnd)||void 0===o||o.call(t,i)})),s}),[]);e.useEffect((()=>(r.addTo(i.getMap()),()=>{r.remove()})),[]);const{longitude:l,latitude:c,offset:d,style:u,draggable:h=!1,popup:p=null,rotation:m=0,rotationAlignment:g="auto",pitchAlignment:f="auto"}=t;return e.useEffect((()=>{W(r.getElement(),u)}),[u]),e.useImperativeHandle(o,(()=>r),[]),r.getLngLat().lng===l&&r.getLngLat().lat===c||r.setLngLat([l,c]),d&&!function(e,t){const o=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,n=Array.isArray(t)?t[0]:t?t.x:0,a=Array.isArray(t)?t[1]:t?t.y:0;return o===n&&i===a}(r.getOffset(),d)&&r.setOffset(d),r.isDraggable()!==h&&r.setDraggable(h),r.getRotation()!==m&&r.setRotation(m),r.getRotationAlignment()!==g&&r.setRotationAlignment(g),r.getPitchAlignment()!==f&&r.setPitchAlignment(f),r.getPopup()!==p&&r.setPopup(p),s.createPortal(t.children,r.getElement())}))),e.memo(e.forwardRef((function(t,o){const{map:i,mapLib:n}=e.useContext(B),a=e.useMemo((()=>document.createElement("div")),[]),r=e.useRef({props:t});r.current.props=t;const l=e.useMemo((()=>{const e={...t},o=new n.Popup(e);return o.setLngLat([t.longitude,t.latitude]),o.once("open",(e=>{var t,o;null===(o=(t=r.current.props).onOpen)||void 0===o||o.call(t,e)})),o}),[]);if(e.useEffect((()=>{const e=e=>{var t,o;null===(o=(t=r.current.props).onClose)||void 0===o||o.call(t,e)};return l.on("close",e),l.setDOMContent(a).addTo(i.getMap()),()=>{l.off("close",e),l.isOpen()&&l.remove()}}),[]),e.useEffect((()=>{W(l.getElement(),t.style)}),[t.style]),e.useImperativeHandle(o,(()=>l),[]),l.isOpen()&&(l.getLngLat().lng===t.longitude&&l.getLngLat().lat===t.latitude||l.setLngLat([t.longitude,t.latitude]),t.offset&&!_(l.options.offset,t.offset)&&l.setOffset(t.offset),l.options.anchor===t.anchor&&l.options.maxWidth===t.maxWidth||(l.options.anchor=t.anchor,l.setMaxWidth(t.maxWidth)),l.options.className!==t.className)){const e=Z(l.options.className),o=Z(t.className);for(const t of e)o.has(t)||l.removeClassName(t);for(const t of o)e.has(t)||l.addClassName(t);l.options.className=t.className}return s.createPortal(t.children,a)}))),e.memo((function(t){const o=J((({mapLib:e})=>new e.AttributionControl(t)),{position:t.position});return e.useEffect((()=>{W(o._container,t.style)}),[t.style]),null})),e.memo((function(t){const o=J((({mapLib:e})=>new e.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})),{position:t.position});return e.useEffect((()=>{W(o._controlContainer,t.style)}),[t.style]),null})),e.memo(e.forwardRef((function(t,o){const i=e.useRef({props:t}),n=J((({mapLib:e})=>{const o=new e.GeolocateControl(t),n=o._setupUI;return o._setupUI=e=>{o._container.hasChildNodes()||n(e)},o.on("geolocate",(e=>{var t,o;null===(o=(t=i.current.props).onGeolocate)||void 0===o||o.call(t,e)})),o.on("error",(e=>{var t,o;null===(o=(t=i.current.props).onError)||void 0===o||o.call(t,e)})),o.on("outofmaxbounds",(e=>{var t,o;null===(o=(t=i.current.props).onOutOfMaxBounds)||void 0===o||o.call(t,e)})),o.on("trackuserlocationstart",(e=>{var t,o;null===(o=(t=i.current.props).onTrackUserLocationStart)||void 0===o||o.call(t,e)})),o.on("trackuserlocationend",(e=>{var t,o;null===(o=(t=i.current.props).onTrackUserLocationEnd)||void 0===o||o.call(t,e)})),o}),{position:t.position});return i.current.props=t,e.useImperativeHandle(o,(()=>n),[]),e.useEffect((()=>{W(n._container,t.style)}),[t.style]),null}))),e.memo((function(t){const o=J((({mapLib:e})=>new e.NavigationControl(t)),{position:t.position});return e.useEffect((()=>{W(o._container,t.style)}),[t.style]),null})),e.memo((function(t){const o=J((({mapLib:e})=>new e.ScaleControl(t)),{position:t.position}),i=e.useRef(t),n=i.current;i.current=t;const{style:a}=t;return void 0!==t.maxWidth&&t.maxWidth!==n.maxWidth&&(o.options.maxWidth=t.maxWidth),void 0!==t.unit&&t.unit!==n.unit&&o.setUnit(t.unit),e.useEffect((()=>{W(o._container,a)}),[a]),null}));const K=l((()=>import("./vendor-8b0cae8e.js").then((e=>e.m))),["assets/vendor-8b0cae8e.js","assets/deck-68cb15df.js"]),V=e.forwardRef((function(e,t){return U(e,t,K)})),Y={longitude:-109.42863,latitude:37.743507,zoom:6.51,pitch:51.55,bearing:-19.1,maxPitch:89,minPitch:0,minZoom:1,maxZoom:20,fov:60};function G(){return Y}const X="pk.eyJ1Ijoic3R1ZGlvLW9ycGltZW50IiwiYSI6ImNtOTFxZGI1ZzAzdDEycnBzbHZhNHdvbHMifQ.4z6bo58xtenHNY2vwt39Gg";function q({styleUrl:o,children:i,layers:n=[],viewState:a,onViewStateChange:r,territoriesVisible:s={navajo:!0,hopi:!0,zuni:!0,others:!1},showMapboxMarkers:l=!1,deckRef:c}){const d=G(),[u,h]=e.useState(d),[p,m]=e.useState(!1),[g,f]=e.useState(null),v=a||u,b=e.useCallback((()=>{}),[v]);e.useEffect((()=>{const e=e=>{"c"!==e.key&&"C"!==e.key||b()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[b]),e.useEffect((()=>{if(g)try{const e=(e,t)=>{if(t){const t=["==",["get","Slug"],e],o=`territory-${e}`;if(g.getLayer(o))g.setLayoutProperty(o,"visibility","visible");else if(g.getLayer("native-land-territories")){g.getLayer("native-land-territories");g.addLayer({id:o,type:"fill",source:"native-land","source-layer":"4pgB_next_nld_terr_prod_source_layer",filter:t,paint:{"fill-color":"navajo"===e?"hsla(0, 99%, 61%, 0.5)":"hopi"===e?"hsla(294, 66%, 34%, 0.5)":"zuni"===e?"hsla(249, 70%, 59%, 0.5)":"hsla(156, 66%, 34%, 0.3)","fill-outline-color":"navajo"===e?"hsl(0, 99%, 41%)":"hopi"===e?"hsl(294, 66%, 24%)":"zuni"===e?"hsl(249, 70%, 39%)":"hsl(156, 66%, 24%)"}})}}else{const t=`territory-${e}`;g.getLayer(t)&&g.setLayoutProperty(t,"visibility","none")}};if(["native-land-territories","native-land-labels"].forEach((e=>{g.getLayer(e)&&g.setLayoutProperty(e,"visibility","none")})),e("navajo",s.navajo),e("hopi",s.hopi),e("zuni",s.zuni),s.others){const e="territory-others";g.getLayer(e)?g.setLayoutProperty(e,"visibility","visible"):g.addLayer({id:e,type:"fill",source:"native-land","source-layer":"4pgB_next_nld_terr_prod_source_layer",filter:["all",["!=",["get","Slug"],"navajo"],["!=",["get","Slug"],"hopi"],["!=",["get","Slug"],"zuni"]],paint:{"fill-color":"hsla(156, 66%, 34%, 0.3)","fill-outline-color":"hsl(156, 66%, 24%)"}})}else{const e="territory-others";g.getLayer(e)&&g.setLayoutProperty(e,"visibility","none")}}catch(e){}}),[g,s]);const x=(e=>{if(l)return e;const t=JSON.parse(JSON.stringify(e)),o=["expedition-points","expedition-point-labels","origin-destination-markers","origin-destination-labels","general-photo-markers","general-photo-labels"];return t.layers=t.layers.map((e=>o.includes(e.id)?{...e,layout:{...e.layout||{},visibility:"none"}}:e)),t})((e=>{const t=JSON.parse(JSON.stringify(e)),o=s.navajo,i=s.hopi,n=s.zuni,a=s.others;return o||i||n||a?(t.layers=t.layers.map((e=>{if("native-land-territories"===e.id||"native-land-labels"===e.id){const t=["any"];return o&&t.push(["==",["get","Slug"],"navajo"]),i&&t.push(["==",["get","Slug"],"hopi"]),n&&t.push(["==",["get","Slug"],"zuni"]),a&&t.push(["all",["!=",["get","Slug"],"navajo"],["!=",["get","Slug"],"hopi"],["!=",["get","Slug"],"zuni"]]),{...e,filter:t}}return e})),t):(t.layers=t.layers.filter((e=>"native-land-territories"!==e.id&&"native-land-labels"!==e.id)),t)})({version:8,name:"Indigenous Territories Map",sources:{"mapbox-satellite":{type:"raster",url:"mapbox://mapbox.satellite",tileSize:256},"mapbox-dem":{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14},"native-land":{type:"vector",url:"mapbox://nativeland.4pgB_next_nld_terr_prod_layer"},"jackson-expedition-route":{type:"geojson",data:{type:"Feature",properties:{name:"Jackson Expedition Route"},geometry:{type:"LineString",coordinates:[[-111.65,35.19],[-110.87,35.6],[-110.45,35.73],[-110.17,36.31],[-109.87,36.99]]}}},"hillers-expedition-route":{type:"geojson",data:{type:"Feature",properties:{name:"Hillers Expedition Route"},geometry:{type:"LineString",coordinates:[[-110.67,36.92],[-110.5,36.54],[-110.09,36.11],[-109.87,35.83],[-109.54,35.52]]}}},"expedition-points":{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"Canyon de Chelly",expedition:"Jackson",description:"Major photography site"},geometry:{type:"Point",coordinates:[-109.47,36.13]}},{type:"Feature",properties:{name:"Walpi",expedition:"Hillers",description:"Hopi village photography"},geometry:{type:"Point",coordinates:[-110.39,35.87]}},{type:"Feature",properties:{name:"Monument Valley",expedition:"Jackson",description:"Iconic landscape photography"},geometry:{type:"Point",coordinates:[-110.11,36.98]}},{type:"Feature",properties:{name:"Window Rock",expedition:"Hillers",description:"Cultural documentation"},geometry:{type:"Point",coordinates:[-109.05,35.68]}}]}},"chicago-route":{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[-87.63,41.88],[-111.89,40.76],[-110.55,36.15]]}}},"origin-destination-points":{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"Chicago",type:"origin",description:"Starting point for expeditions"},geometry:{type:"Point",coordinates:[-87.63,41.88]}},{type:"Feature",properties:{name:"Washington D.C.",type:"destination",description:"Smithsonian Institution"},geometry:{type:"Point",coordinates:[-77.03,38.9]}},{type:"Feature",properties:{name:"Salt Lake City",type:"waypoint",description:"Supply point for expeditions"},geometry:{type:"Point",coordinates:[-111.89,40.76]}},{type:"Feature",properties:{name:"Mexico City",type:"destination",description:"Exhibition location"},geometry:{type:"Point",coordinates:[-99.13,19.43]}},{type:"Feature",properties:{name:"New York",type:"destination",description:"Exhibition venue"},geometry:{type:"Point",coordinates:[-73.94,40.67]}}]}},"general-image-locations":{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"Chaco Canyon",type:"photo-site",description:"Archaeological site photography"},geometry:{type:"Point",coordinates:[-107.96,36.06]}},{type:"Feature",properties:{name:"Grand Canyon",type:"photo-site",description:"Landscape photography"},geometry:{type:"Point",coordinates:[-112.1129,36.0544]}},{type:"Feature",properties:{name:"Yellowstone",type:"photo-site",description:"National park documentation"},geometry:{type:"Point",coordinates:[-110.58,44.42]}}]}}},sprite:"mapbox://sprites/mapbox/satellite-streets-v12",glyphs:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",terrain:{source:"mapbox-dem",exaggeration:1.2},layers:[{id:"satellite",type:"raster",source:"mapbox-satellite",minzoom:0,maxzoom:22},{id:"native-land-territories",type:"fill",source:"native-land","source-layer":"4pgB_next_nld_terr_prod_source_layer",paint:{"fill-color":["match",["get","Slug"],["navajo"],"hsla(0, 99%, 61%, 0.5)",["hopi"],"hsla(294, 66%, 34%, 0.5)",["zuni"],"hsla(249, 70%, 59%, 0.5)","hsla(156, 66%, 34%, 0.3)"],"fill-outline-color":["match",["get","Slug"],["navajo"],"hsl(0, 99%, 41%)",["hopi"],"hsl(294, 66%, 24%)",["zuni"],"hsl(249, 70%, 39%)","hsl(156, 66%, 24%)"]}},{id:"native-land-labels",type:"symbol",source:"native-land","source-layer":"4pgB_next_nld_terr_prod_source_layer",layout:{"text-field":["get","Name"],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-size":12,"text-max-width":10,"text-variable-anchor":["center"],"text-justify":"center","text-radial-offset":.5},paint:{"text-color":"white","text-halo-color":"rgba(0, 0, 0, 0.7)","text-halo-width":1.5}},{id:"jackson-expedition-route-line",type:"line",source:"jackson-expedition-route",layout:{visibility:"none","line-join":"round","line-cap":"round"},paint:{"line-color":"hsl(199, 100%, 43%)","line-width":6,"line-dasharray":[0,2,1],"line-blur":1}},{id:"hillers-expedition-route-line",type:"line",source:"hillers-expedition-route",layout:{visibility:"none","line-join":"round","line-cap":"round"},paint:{"line-color":"hsla(0, 100%, 61%, 0.83)","line-width":6,"line-dasharray":[0,2,1],"line-blur":1}},{id:"expedition-points",type:"circle",source:"expedition-points",layout:{visibility:"none"},paint:{"circle-radius":10,"circle-color":["match",["get","expedition"],"Jackson","hsl(199, 100%, 43%)","Hillers","hsla(0, 100%, 61%, 0.83)","lightgray"],"circle-stroke-width":3,"circle-stroke-color":"white","circle-blur":.3}},{id:"expedition-point-labels",type:"symbol",source:"expedition-points",layout:{visibility:"none","text-field":["get","name"],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-size":14,"text-offset":[0,-2],"text-anchor":"bottom","text-allow-overlap":!0},paint:{"text-color":"white","text-halo-color":"rgba(0, 0, 0, 0.9)","text-halo-width":2}},{id:"origin-destination-markers",type:"circle",source:"origin-destination-points",layout:{visibility:"none"},paint:{"circle-radius":12,"circle-color":["match",["get","type"],"origin","hsl(54, 100%, 50%)","destination","hsl(54, 100%, 50%)","waypoint","hsl(54, 100%, 40%)","hsl(54, 100%, 50%)"],"circle-stroke-width":3,"circle-stroke-color":"white","circle-blur":.3}},{id:"origin-destination-labels",type:"symbol",source:"origin-destination-points",layout:{visibility:"none","text-field":["get","name"],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-size":16,"text-offset":[0,-2],"text-anchor":"bottom","text-allow-overlap":!0,"text-justify":"center","text-max-width":10},paint:{"text-color":"white","text-halo-color":"rgba(0, 0, 0, 0.9)","text-halo-width":2}},{id:"general-photo-markers",type:"circle",source:"general-image-locations",layout:{visibility:"none"},paint:{"circle-radius":10,"circle-color":"hsl(30, 100%, 50%)","circle-stroke-width":3,"circle-stroke-color":"white","circle-blur":.2}},{id:"general-photo-labels",type:"symbol",source:"general-image-locations",layout:{visibility:"none","text-field":["get","name"],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-size":14,"text-offset":[0,-2],"text-anchor":"bottom","text-allow-overlap":!0},paint:{"text-color":"white","text-halo-color":"rgba(0, 0, 0, 0.9)","text-halo-width":2}},{id:"chicago-to-arizona-line",type:"line",source:"chicago-route",layout:{visibility:"none","line-join":"round","line-cap":"round"},paint:{"line-color":"hsla(54, 72%, 49%, 0.8)","line-width":5,"line-dasharray":[2,1],"line-blur":1}}]}));return e.useEffect((()=>{}),[s]),e.useEffect((()=>{if(g){["expedition-points","expedition-point-labels","origin-destination-markers","origin-destination-labels","general-photo-markers","general-photo-labels","jackson-expedition-route-line","hillers-expedition-route-line","chicago-to-arizona-line"].forEach((e=>{try{g.getLayer(e)&&g.setLayoutProperty(e,"visibility",l?"visible":"none")}catch(t){}}))}}),[g,l]),y.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:y.jsxs(t,{ref:c,initialViewState:d,viewState:v,controller:{dragPan:!0,dragRotate:!0,scrollZoom:!0,touchZoom:!0,touchRotate:!0,doubleClickZoom:!0,keyboard:!0,maxPitch:89,minPitch:0},onViewStateChange:e=>{r&&r(e)},layers:n,onError:e=>{},children:[y.jsx(V,{id:"main",mapboxAccessToken:X,mapStyle:x,attributionControl:!1,logoPosition:"bottom-right",interactive:!0,cooperativeGestures:!1,locale:{"AttributionControl.ToggleAttribution":"","AttributionControl.ChangeAttribution":"","TerrainControl.enableTerrain":"","NavigationControl.ZoomIn":"","NavigationControl.ZoomOut":"","NavigationControl.ResetBearing":"","GeolocateControl.Find":"","GeolocateControl.FindMe":"","ScaleControl.Feet":"","ScaleControl.Meters":"","LogoControl.Title":"","Map.Title":""},onLoad:e=>{m(!0),f(e.target);e.target.getContainer().querySelectorAll(".mapboxgl-ctrl-attrib-inner, .mapboxgl-ctrl-attrib, .mapboxgl-ctrl-logo, .mapboxgl-ctrl-bottom-right").forEach((e=>{e.style.display="none"}))}}),p&&i]})})}function $(e){if(e.startsWith("http")||e.startsWith("data:"))return e;const t=e.startsWith("/")?e.slice(1):e,o="/IndigenousMapping-CDP-SP25/";return(o.endsWith("/")?o:o+"/")+t}q._transitionInProgress=!1,q._lastExternalViewState=null;const Q={"omaha-nebraska":{id:"omaha-nebraska",name:"Omaha, Nebraska",photographer:"A. Ruger",year:"1868",catalog_ref:"Chicago Lithographing Co., 1868",description:"Bird's-eye view of the city of Omaha, Nebraska, from the east side of the Missouri River. Drawn and published by A. Ruger, this 1868 lithograph illustrates early urban development, rail activity, and steamboat commerce at the edge of the western frontier.",coordinates:{latitude:41.2565,longitude:-95.9345},elevation_feet:1060,elevation_meters:323,camera:{viewpoint:{latitude:41.254041,longitude:-95.925252,elevation:0},bearing:-77.22,pitch:60,zoom:15.71,fov:60},overlay:{opacity:.5,bounds:[[-95.945,41.25],[-95.915,41.265]]},image_url:"/assets/img/Omaha_1877.jpg",expedition:"Pre-Powell Surveys",expedition_notes:"Lithograph created during post-Civil War expansion and visual documentation of key railroad cities."},"mystic-lake":{id:"mystic-lake",name:"Mystic Lake, Montana",photographer:"Jackson",year:"1871-1878",catalog_ref:"P.48.1.7",description:"Mystic Lake, Montana Territory",coordinates:{latitude:45.5453506,longitude:-110.9193637},elevation_feet:6398,elevation_meters:1950,camera:{viewpoint:{latitude:45.543261,longitude:-110.920025,elevation:0},bearing:3.66,pitch:84.73,zoom:17.65,fov:60},overlay:{opacity:.5,bounds:[[-110.924,45.544],[-110.917,45.548]]},image_url:"/assets/img/P.48.1.7.jpg",expedition:"Hayden Survey"},"gallatin-headwaters":{id:"gallatin-headwaters",name:"Headwaters of the Gallatin Mountains",photographer:"Jackson",year:"1871-1878",catalog_ref:"P.48.1.16",description:"Headwaters of the Gallatin Mountains",coordinates:{latitude:44.9632,longitude:-111.0573},elevation_feet:8500,elevation_meters:2591,camera:{viewpoint:{latitude:44.958707,longitude:-111.032414,elevation:0},bearing:147.5,pitch:86.13,zoom:17.66,fov:60},overlay:{opacity:.5,bounds:[[-111.059,44.9625],[-111.0565,44.964]]},image_url:"/assets/img/P.48.1.16.jpg",expedition:"Hayden Survey"},"mammoth-hot-springs":{id:"mammoth-hot-springs",name:"Mammoth Hot Springs",photographer:"Jackson",year:"1871-1878",catalog_ref:"P.48.1.8",description:"Mammoth Hot-Springs Gardiners River [Wyoming]",coordinates:{latitude:44.9772,longitude:-110.7028},elevation_feet:6200,elevation_meters:1889,camera:{viewpoint:{latitude:44.970675,longitude:-110.704326,elevation:0},bearing:174.64,pitch:86.8,zoom:17.26,fov:60},overlay:{opacity:.5,bounds:[[-110.707,44.975],[-110.698,44.979]]},image_url:"/assets/img/P.48.1.8.jpg",expedition:"Hayden Survey"},"yellowstone-falls":{id:"yellowstone-falls",name:"Great Falls of the Yellowstone",photographer:"Jackson",year:"1871",catalog_ref:"P.48.1.9",description:"Great Falls of the Yellowstone",coordinates:{latitude:44.7181,longitude:-110.4961},elevation_feet:7500,elevation_meters:2286,camera:{viewpoint:{latitude:44.717836,longitude:-110.495424,elevation:0},bearing:-101.29,pitch:84.07,zoom:16.28,fov:60},overlay:{opacity:.5,bounds:[[-110.5,44.715],[-110.492,44.721]]},image_url:"/assets/img/P.48.1.9.jpg",expedition:"Hayden Survey"},"holy-cross":{id:"holy-cross",name:"Mountain of the Holy-Cross",photographer:"Jackson",year:"1873",catalog_ref:"P.48.1.2",description:"Mountain of the Holy-Cross",coordinates:{latitude:39.4668,longitude:-106.4817},elevation_feet:14009,elevation_meters:4270,camera:{viewpoint:{latitude:39.462081,longitude:-106.485924,elevation:0},bearing:-108.44,pitch:85.79,zoom:14.81,fov:60},overlay:{opacity:.8,bounds:[[-106.4785,39.4635],[-106.4765,39.4655]],scale:1,aspect:1.33},image_url:"/assets/img/P.48.1.2.jpg",expedition:"Hayden Survey"},"mancos-canyon-1":{id:"mancos-canyon-1",name:"Ancient Ruins in the Canyon of the Mancos",photographer:"Jackson",year:"1874-1875",catalog_ref:"P.48.1.29",description:"Ancient Ruins in the Canyon of the Mancos",coordinates:{latitude:37.185,longitude:-108.4925},elevation_feet:7200,elevation_meters:2195,camera:{viewpoint:{latitude:37.337382,longitude:-108.444995,elevation:0},bearing:-84.32,pitch:82.48,zoom:18.37,fov:60},overlay:{opacity:.5,bounds:[[-108.495,37.184],[-108.491,37.186]]},image_url:"/assets/img/P.48.1.29.jpg",expedition:"Hayden Survey"},"mancos-canyon-2":{id:"mancos-canyon-2",name:"Ancient Ruins in the Canyon of the Mancos",photographer:"Jackson",year:"1874-1875",catalog_ref:"P.48.1.30",description:"Ancient Ruins in the Canyon of the Mancos",coordinates:{latitude:37.0461,longitude:-108.6956},elevation_feet:6700,elevation_meters:2042,camera:{viewpoint:{latitude:37.335,longitude:-108.435,elevation:6750},bearing:65,pitch:0,zoom:16,fov:55},overlay:{opacity:.5,bounds:[[-108.697,37.045],[-108.694,37.047]]},image_url:"/assets/img/P.48.1.30.jpg",expedition:"Hayden Survey"},"window-rock":{id:"window-rock",name:"Window Rock",photographer:"landmark",year:"null",catalog_ref:"null",description:"Natural sandstone arch and seat of government of the Navajo Nation in northeastern Arizona.",coordinates:{latitude:35.68057,longitude:-109.05259},elevation_feet:6830,elevation_meters:2082,camera:{viewpoint:{latitude:35.6815,longitude:-109.0537,elevation:6900},bearing:25,pitch:-10,zoom:16,fov:65},overlay:{opacity:.5,bounds:[[-109.055,35.6785],[-109.0505,35.6825]]},image_url:"null",expedition:"landmark",expedition_notes:"null"},"chaco-canyon":{id:"chaco-canyon",name:"Chaco Canyon",photographer:"landmark",year:"null",catalog_ref:"null",description:"Chaco Canyon",coordinates:{latitude:36.060293,longitude:-107.967008},elevation_feet:6106,elevation_meters:1861,camera:{viewpoint:{latitude:36.0636,longitude:-107.9701,elevation:6270},bearing:155,pitch:-15,zoom:15.5,fov:70},overlay:{opacity:.5,bounds:[[-107.975,36.055],[-107.96,36.065]]},image_url:"null",expedition:"null",expedition_notes:"null"},"monument-valley":{id:"monument-valley",name:"Monument Valley",photographer:"landmark",year:"null",catalog_ref:"null",description:"Monument Valley, a region of the Colorado Plateau characterized by a cluster of vast sandstone buttes, is a sacred site for the Navajo Nation.",coordinates:{latitude:36.998,longitude:-110.0984},elevation_feet:5200,elevation_meters:1585,camera:{viewpoint:{latitude:36.978849,longitude:-110.101701,elevation:0},bearing:166.95,pitch:72.41,zoom:13.87,fov:60},overlay:{opacity:.5,bounds:[[-110.11,36.99],[-110.085,37.005]]},image_url:"null",expedition:"null",expedition_notes:"null"},"canyon-de-chelly":{id:"canyon-de-chelly",name:"Canyon de Chelly",photographer:"landmark",year:"null",catalog_ref:"null",description:"Canyon de Chelly National Monument, located within the Navajo Nation in northeastern Arizona, features dramatic sandstone cliffs and ancient dwellings. Spider Rock, a prominent 750-foot sandstone spire, stands at the junction of Canyon de Chelly and Monument Canyon.",coordinates:{latitude:36.14,longitude:-109.47},elevation_feet:5640,elevation_meters:1719,camera:{viewpoint:{latitude:36.133865,longitude:-109.482538,elevation:0},bearing:116.25,pitch:77.89,zoom:15.5,fov:60},overlay:{opacity:.5,bounds:[[-109.475,36.135],[-109.46,36.145]]},image_url:"null",expedition:"null",expedition_notes:"null"},"salt-lake-city-1875":{id:"salt-lake-city-1875",name:"Salt Lake City (1875)",photographer:"E.S. Glover",year:"1875",catalog_ref:"Library of Congress G4344.S3A3 1875 .G6",description:"Bird's-eye view of Salt Lake City, Utah, 1875, oriented from the northwest looking southeast, with Temple Square at the center.",coordinates:{latitude:40.7707,longitude:-111.8925},elevation_feet:4300,elevation_meters:1311,camera:{viewpoint:{latitude:40.692643,longitude:-111.903046,elevation:0},bearing:54.75,pitch:78.17,zoom:14.95,fov:60},overlay:{opacity:.5,bounds:[[-111.91,40.76],[-111.875,40.78]]},image_url:"/assets/img/SLC_1875.jpg",expedition:"null",expedition_notes:"null"},"walpi-pueblo-1":{id:"walpi-pueblo-1",name:"East Mesa",photographer:"Jackson",year:"1874-1875",catalog_ref:"P.48.1.28",description:"[The Pueblo of Walpi on the East Mesa opposite Tewa]",coordinates:{latitude:37.288492,longitude:-108.474738},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:37.288492,longitude:-108.474738,elevation:0},bearing:-125.22,pitch:83.47,zoom:17.15,fov:60},overlay:{opacity:.5,bounds:[[-110.3895,35.8285],[-110.388,35.8295]]},image_url:"/assets/img/P.48.1.28.jpg",expedition:"Hayden Survey"},"walpi-pueblo-2":{id:"walpi-pueblo-2",name:"Walpi Pueblo - Terraced Houses",photographer:"Hillers",year:"1874-1875",catalog_ref:"P.48.1.20",description:"Terraced Houses at Wolpi [Walpi]",coordinates:{latitude:35.829354,longitude:-110.389},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.829354,longitude:-110.388763,elevation:0},bearing:124.91,pitch:82.26,zoom:20,fov:60},overlay:{opacity:.5,bounds:[[-110.395,35.8365],[-110.3935,35.838]]},image_url:"/assets/img/P.48.1.20.jpg",expedition:"Powell Expedition - Arizona (Hopi)",expedition_notes:"Part of Powell's Bureau of American Ethnology (BAE) survey to collect 'tangible tokens' of Hopi culture for the 1876 Philadelphia Centennial Exposition (World's Fair)"},"walpi-pueblo-3":{id:"walpi-pueblo-3",name:"Walpi and Shechumavi - Tewa",photographer:"Hillers",year:"1874-1875",catalog_ref:"P.48.1.10",description:"Wolpi [Walpi] and Shechumavi [Sichomovi], from Tewa",coordinates:{latitude:35.8371,longitude:-110.3943},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.8371,longitude:-110.3943,elevation:6725},bearing:180,pitch:0,zoom:15,fov:60},overlay:{opacity:.5,bounds:[[-110.395,35.8365],[-110.3935,35.838]]},image_url:"/assets/img/P.48.1.10.jpg",expedition:"Powell Expedition - Arizona (Hopi)",expedition_notes:"Part of Powell's Bureau of American Ethnology (BAE) survey to collect 'tangible tokens' of Hopi culture for the 1876 Philadelphia Centennial Exposition (World's Fair)"},"walpi-pueblo-4":{id:"walpi-pueblo-4",name:"Walpi Pueblo - Dance Rock",photographer:"Hillers",year:"1874-1875",catalog_ref:"P.48.1.12",description:"Dance Rock. Wolpi [Walpi]",coordinates:{latitude:35.8367,longitude:-110.3921},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.8367,longitude:-110.3921,elevation:6725},bearing:180,pitch:0,zoom:17,fov:60},overlay:{opacity:.5,bounds:[[-110.395,35.8365],[-110.3935,35.838]]},image_url:"/assets/img/P.48.1.12.jpg",expedition:"Powell Expedition - Arizona (Hopi)",expedition_notes:"Part of Powell's Bureau of American Ethnology (BAE) survey to collect 'tangible tokens' of Hopi culture for the 1876 Philadelphia Centennial Exposition (World's Fair)"},"montezuma-canyon":{id:"montezuma-canyon",name:"Montezuma Canyon",photographer:"Jackson",year:"1874-1876",catalog_ref:"P.48.1.31",description:"Ruins in the Montezuma Canyon",coordinates:{latitude:37.387,longitude:-109.3062},elevation_feet:5800,elevation_meters:1768,camera:{viewpoint:{latitude:37.385507,longitude:-109.305991,elevation:0},bearing:5.98,pitch:80.86,zoom:18.66,fov:60},overlay:{opacity:.5,bounds:[[-109.308,37.386],[-109.305,37.388]]},image_url:"/assets/img/P.48.1.31.jpg",expedition:"Hayden Survey"},"walpi-pueblo-5":{id:"walpi-pueblo-5",name:"Walpi Pueblo - Weaving",photographer:"Hillers",year:"1879",catalog_ref:"P.48.1.22",description:"A Moki [Hopi] Weaving [Walpi]",coordinates:{latitude:35.828917,longitude:-110.38844},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.828917,longitude:-110.38844,elevation:0},bearing:-42.22,pitch:80.97,zoom:19.81,fov:60},overlay:{opacity:.5,bounds:[[-110.3886,35.829],[-110.3882,35.8293]]},image_url:"/assets/img/P.48.1.22.jpg",expedition:"Powell Expedition - BAE Survey of Arizona/New Mexico",expedition_notes:"Part of Powell's first act as Bureau of American Ethnology director after its establishment. Hillers was sent with James Stevenson and Frank Hamilton Cushing to photograph Pueblo peoples."},"grand-canyon":{id:"grand-canyon",name:"Grand Canyon [Arizona]",photographer:"Hillers",year:"1872",catalog_ref:"null",description:"Grand Canyon [Arizona]",coordinates:{latitude:36.0544,longitude:-112.1129},elevation_feet:1e4,elevation_meters:3e3,camera:{viewpoint:{latitude:36.119348,longitude:-112.052281,elevation:0},bearing:-62.72,pitch:87.51,zoom:12,fov:60},overlay:{opacity:.5,bounds:[[-112.143,36.053],[-112.11,36.056]]},image_url:"/assets/img/GC_tribes.webp",expedition:"Powell Expedition - Arizona and Utah (1872)",expedition_notes:"Part of Powell's exploration of the Grand Canyon region"},nevada:{id:"nevada",name:"Nevada",photographer:"",year:"1873",catalog_ref:"null",description:"Nevada",coordinates:{latitude:39.773978,longitude:-116.618156},elevation_feet:15e3,elevation_meters:4500,camera:{viewpoint:{latitude:39.7739,longitude:-116.6181,elevation:6e3},bearing:210,pitch:5,zoom:12,fov:65},overlay:{opacity:.5,bounds:[[-116.62,39.772],[-116.616,39.776]]},image_url:"null",expedition:"Powell Expedition - Nevada (1873)",expedition_notes:"Part of Powell's survey of Nevada, Utah, and Arizona regions"},arizona:{id:"arizona",name:"Arizona",photographer:"",year:"1873, 1881",catalog_ref:"null",description:"Arizona",coordinates:{latitude:34.300692,longitude:-111.566677},elevation_feet:1e4,elevation_meters:3e3,camera:{viewpoint:{latitude:34.3006,longitude:-111.5666,elevation:5e3},bearing:150,pitch:0,zoom:13,fov:60},overlay:{opacity:.5,bounds:[[-111.568,34.299],[-111.565,34.302]]},image_url:"null",expedition:"Powell Expedition - Arizona (1873, 1881)",expedition_notes:"Initial survey in 1873 as part of Powell's expedition to Utah, Nevada, and Arizona; return visit in 1881 for additional documentation"},utah:{id:"utah",name:"Utah",photographer:"",year:"1874",catalog_ref:"null",description:"Utah",coordinates:{latitude:39.240763,longitude:-111.74984},elevation_feet:12e3,elevation_meters:3600,camera:{viewpoint:{latitude:39.2407,longitude:-111.7498,elevation:6e3},bearing:180,pitch:0,zoom:13,fov:60},overlay:{opacity:.5,bounds:[[-111.751,39.239],[-111.748,39.242]]},image_url:"null",expedition:"Powell Expedition - Utah (1874)",expedition_notes:"Documentation of Utah landscapes as part of Powell's ongoing surveys"},"colorado-river-grand-junction":{id:"colorado-river-grand-junction",name:"Cañon of Grand River, Utah",photographer:"Jackson",year:"1874–1875",catalog_ref:"Hayden Survey, Colorado Plateau Series",description:"ALthough this photo is actually from 1890, Jackson collected photographic documentation of the Colorado River corridor near Grand Junction, Colorado during the Hayden Geological Survey, this area represents one of the key access points to the lower Colorado River system from southwestern Colorado.",coordinates:{latitude:39.126,longitude:-108.788},elevation_feet:4600,elevation_meters:1402,camera:{viewpoint:{latitude:39.120591,longitude:-108.78874,elevation:0},bearing:-172.59,pitch:86.77,zoom:16.52,fov:60},overlay:{opacity:.5,bounds:[[-108.571,39.063],[-108.56,39.068]]},image_url:"/assets/img/ColoradoRiver.jpeg",expedition:"Hayden Survey"},"indian-territory-oklahoma":{id:"indian-territory-oklahoma",name:"Indian Territory (Oklahoma)",photographer:"example",year:"1875",catalog_ref:"Smithsonian Centennial Collection, 1876",description:"Photographs and ethnographic records collected by John K. Hillers under direction of John Wesley Powell, documenting Indigenous nations in Indian Territory for the Smithsonian Institution's 1876 Centennial Exposition in Philadelphia. The expedition aimed to gather visual and cultural artifacts from the region, including portraits, dwellings, and ceremonial practices.",coordinates:{latitude:35.4676,longitude:-97.5164},elevation_feet:1197,elevation_meters:365,camera:{viewpoint:{latitude:35.47,longitude:-97.51,elevation:1220},bearing:180,pitch:-5,zoom:14.8,fov:60},overlay:{opacity:.5,bounds:[[-97.53,35.455],[-97.5,35.48]]},image_url:"/assets/img/Oklahoma.jpg",expedition:"Powell Survey, Smithsonian Commission",expedition_notes:"Images and artifacts collected for the U.S. Centennial Exposition (Philadelphia, 1876). Focused on Indigenous communities relocated to Indian Territory, including Cherokee, Choctaw, Chickasaw, Creek, and Seminole Nations."},"zuni-eagle":{id:"zuni-eagle",name:"A Zuni Eagle Cage",photographer:"Hillers",year:"1879",catalog_ref:"P.48.1.3",description:"A Zuni Eagle Cage",coordinates:{latitude:35.0695,longitude:-108.8484},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.0695,longitude:-108.8484,elevation:6300},bearing:0,pitch:0,zoom:19,fov:50},overlay:{opacity:.5,bounds:[[-108.849,35.069],[-108.848,35.07]]},image_url:"/assets/img/P.48.1.3.jpg",expedition:"Powell Expedition - BAE Survey of Arizona/New Mexico (1879)",expedition_notes:"Part of Powell's first act as Bureau of American Ethnology director. Hillers was sent with James Stevenson and Frank Hamilton Cushing to Arizona and New Mexico to survey archaeological 'ruins' and photograph the Pueblo peoples."},"navajo-joganda":{id:"navajo-joganda",name:"A Navajo Joganda",photographer:"Hillers",year:"null",catalog_ref:"P.48.1.11",description:"A Navajo Joganda, [Hogan]",coordinates:{latitude:36.12,longitude:-111.23},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:36.12,longitude:-111.23,elevation:6300},bearing:150,pitch:0,zoom:18,fov:55},overlay:{opacity:.5,bounds:[[-111.231,36.119],[-111.229,36.121]]},image_url:"/assets/img/P.48.1.11.jpg",expedition:"Unknown Powell Expedition",expedition_notes:"Exact expedition date unknown, likely part of Hillers' documentation of Native American structures and dwellings"},"central-mexico":{id:"central-mexico",name:"Central Mexico",photographer:"",year:"1880-1907",catalog_ref:"null",description:"Central Mexico",coordinates:{latitude:22.614328,longitude:-101.672974},elevation_feet:7800,elevation_meters:2375,camera:{viewpoint:{latitude:22.6143,longitude:-101.6729,elevation:7800},bearing:180,pitch:0,zoom:13,fov:60},overlay:{opacity:.5,bounds:[[-101.674,22.613],[-101.671,22.616]]},image_url:"null",expedition:"Post-Powell Expeditions",expedition_notes:"Later work after the Powell expeditions, documenting regions in Central Mexico"}};function ee(e){return Q[e]||null}class te extends o{initializeState(){super.initializeState(),this.state={labelPositions:[],labelLines:[],hoveredMarkerId:null,clickedMarkerId:null}}updateState({props:e,oldProps:t,changeFlags:o}){super.updateState({props:e,oldProps:t,changeFlags:o});if(o.dataChanged||o.viewportChanged||e.selectedPhotoId!==t.selectedPhotoId||!this.state.labelLines||0===this.state.labelLines.length){const{data:t}=e;this.calculateLabelPositions(t)}}calculateLabelPositions(e){if(!e||0===e.length)return;const t=(e=>{if(!e||0===e.length)return[];return[...e].sort(((e,t)=>t.coordinates.latitude-e.coordinates.latitude)).map(((t,o)=>({id:t.id,index:o,markerPosition:[t.coordinates.longitude,t.coordinates.latitude],label:t.name,photographer:t.photographer,originalIndex:e.indexOf(t),useExternalRendering:!0})))})(e);this._sortedLabelData=t,this.setState({labelPositions:[],labelLines:[],sortedLabelData:t})}onClick(e){if(!e||!e.object)return!1;const{onPhotoSelect:t}=this.props;if(t){document.body.style.backgroundColor="rgba(255,255,0,0.1)",setTimeout((()=>document.body.style.backgroundColor=""),100);let o=null;if(e.object.id)o=e.object.id,this.setState({hoveredMarkerId:o,clickedMarkerId:o},(()=>{this.setNeedsUpdate(),setTimeout((()=>{this.state.clickedMarkerId===o&&this.setState({clickedMarkerId:null},(()=>this.setNeedsUpdate()))}),500)}));else if(e.layer&&"marker-labels"===e.layer.id&&this.state.labelPositions){const t=e.index;void 0!==t&&this.state.labelPositions[t]&&(o=this.state.labelPositions[t].id)}if(o)return t(o),!0}return!1}onTap(e){if(!e||!e.object)return!1;const{onPhotoSelect:t}=this.props;if(t){document.body.style.backgroundColor="rgba(0,255,255,0.1)",setTimeout((()=>document.body.style.backgroundColor=""),100);let o=null;if(e.object.id)o=e.object.id,this.setState({hoveredMarkerId:o,clickedMarkerId:o},(()=>{this.setNeedsUpdate(),setTimeout((()=>{this.state.clickedMarkerId===o&&this.setState({clickedMarkerId:null,hoveredMarkerId:null},(()=>this.setNeedsUpdate()))}),500)}));else if(e.layer&&"marker-labels"===e.layer.id&&this.state.labelPositions){const t=e.index;void 0!==t&&this.state.labelPositions[t]&&(o=this.state.labelPositions[t].id)}if(o)return t(o),!0}return!1}onHover(e){if(!e||!e.target||!e.target.getCanvas)return;const t=this.state.hoveredMarkerId;let o=null;e.object?(e.target.getCanvas().style.cursor="pointer",o=e.object.id):e.target.getCanvas().style.cursor="grab",t!==o&&this.setState({hoveredMarkerId:o},(()=>{this.setNeedsUpdate()}))}renderLayers(){const{data:e,iconAtlas:t,iconMapping:o,sizeScale:a,selectedPhotoId:r,onLabelDataUpdate:s,zoomLevel:l}=this.props,{labelPositions:c,labelLines:d,sortedLabelData:u}=this.state;u&&u.length>0&&s&&s(u);const h=new i(this.getSubLayerProps({id:"marker-outlines",data:e,iconAtlas:t,iconMapping:o,getIcon:e=>"marker",getPosition:e=>[e.coordinates.longitude,e.coordinates.latitude],getSize:e=>r===e.id?4:3,getColor:[255,255,255],sizeScale:10,sizeUnits:"pixels",sizeMinPixels:40,sizeMaxPixels:80,billboard:!0,pickable:!0,parameters:{depthTest:!1}})),p=new i(this.getSubLayerProps({id:"marker-icons",data:e.map((e=>({...e,_isSelected:r===e.id,_isHovered:this.state.hoveredMarkerId===e.id,_startPosition:[e.coordinates.longitude,e.coordinates.latitude],_endPosition:[e.coordinates.longitude+2,e.coordinates.latitude]}))),iconAtlas:t,iconMapping:o,getIcon:e=>"marker",getPosition:e=>[e.coordinates.longitude,e.coordinates.latitude],getSize:e=>e._isSelected?3.5:2.5,getColor:e=>"landmark"===e.photographer?[255,255,0]:"Jackson"===e.photographer?[255,87,51]:"Hillers"===e.photographer?[75,144,226]:[148,0,211],sizeScale:10,sizeUnits:"pixels",sizeMinPixels:35,sizeMaxPixels:70,billboard:!0,pickable:!0,parameters:{depthTest:!1},drawConnector:e=>this.props.showLabelConnectors&&(r===e.id||this.state.hoveredMarkerId===e.id||this.state.clickedMarkerId===e.id),getConnectorSourcePosition:e=>e._startPosition,getConnectorTargetPosition:e=>e._endPosition,connectorProps:{dashEnabled:!0,dashGapLength:2,dashLength:2,type:"circle",stroke:"#fff",strokeWidth:1,targetColor:e=>"Jackson"===e.photographer?[255,87,51,200]:[75,144,226,200],sourceColor:e=>"Jackson"===e.photographer?[255,87,51,200]:[75,144,226,200]},getTooltip:({object:e})=>e&&`${e.name} (${e.year||"unknown"})\nPhotographer: ${e.photographer}`,getAngle:e=>e._isSelected||e._isHovered||this.state.clickedMarkerId===e.id?360:0,onClick:this.onClick.bind(this),onTap:this.onTap.bind(this),onHover:this.onHover.bind(this)}));let m=null;return this.props.showLabels&&(m=new n(this.getSubLayerProps({id:"marker-text-labels",data:e,pickable:!0,getPosition:e=>l>=12?[e.coordinates.longitude,e.coordinates.latitude]:[e.coordinates.longitude+.03,e.coordinates.latitude],getText:e=>e.name,getSize:16,getAngle:0,getTextAnchor:"start",getAlignmentBaseline:"center",getPixelOffset:e=>{const t={"omaha-nebraska":[40,-30],"mystic-lake":[60,-30],"gallatin-headwaters":[-320,5],"mammoth-hot-springs":[60,0],"yellowstone-falls":[0,30],"holy-cross":[20,-10],"mancos-canyon-1":[30,0],"mancos-canyon-2":[-20,30],"window-rock":[-50,-15],"chaco-canyon":[55,30],"monument-valley":[-40,-35],"canyon-de-chelly":[30,-45],"salt-lake-city-1875":[50,15],"walpi-pueblo-1":[-30,-50],"walpi-pueblo-2":[-30,40],"walpi-pueblo-3":[-30,80],"walpi-pueblo-4":[-30,120],"montezuma-canyon":[-50,-40],"walpi-pueblo-5":[-30,160],"grand-canyon":[-30,35],nevada:[55,-20],arizona:[-45,25],utah:[35,-40],"colorado-river-grand-junction":[-25,-40],"indian-territory-oklahoma":[50,-35],"zuni-eagle":[-40,20],"navajo-joganda":[30,-25],"central-mexico":[-50,30]};if(t[e.id])return t[e.id];{const t=(e.id||"").split("").reduce(((e,t)=>e+t.charCodeAt(0)),0);return[25*(t%7-3),20*(t%5-2)]}},getColor:e=>"landmark"===e.photographer?[255,255,150,255]:"Jackson"===e.photographer?[255,155,132,255]:"Hillers"===e.photographer?[132,190,255,255]:[200,150,230,255],fontFamily:"Arial, Helvetica, sans-serif",fontWeight:"bold",background:!0,getBorderColor:[0,0,0,200],getBorderWidth:4,backgroundPadding:[5,5,5,5],getBackgroundColor:[0,0,0,180],wordBreak:"break-word",billboard:!0,maxWidth:250,parameters:{depthTest:!1},onClick:this.onClick.bind(this),onHover:this.onHover.bind(this)}))),m?[h,p,m]:[h,p]}}function oe({onPhotoSelect:e=()=>{},selectedPhotoId:t=null,onLabelDataUpdate:o=null,showLabelConnectors:i=!0,showLabels:n=!1,zoomLevel:a=0,filterPhotographer:r=null}={}){const s=Object.values(Q);let l=s.filter((e=>{if(!e.coordinates)return!1;const{longitude:t,latitude:o}=e.coordinates;return null!=t&&null!=o&&"null"!==t&&"null"!==o&&!isNaN(parseFloat(t))&&!isNaN(parseFloat(o))&&!(Math.abs(t)>180||Math.abs(o)>90)}));return r&&(l=l.filter((e=>e.photographer===r))),l.forEach((e=>{e.camera&&e.camera.viewpoint||(e.camera=e.camera||{},e.camera.viewpoint=e.camera.viewpoint||{longitude:e.coordinates.longitude,latitude:e.coordinates.latitude,elevation:1e3},e.camera.bearing=e.camera.bearing||0,e.camera.pitch=e.camera.pitch||60,e.camera.zoom=e.camera.zoom||14,e.camera.fov=e.camera.fov||60)})),new te({id:"photo-markers-composite",data:l,iconAtlas:"https://raw.githubusercontent.com/visgl/deck.gl-data/master/website/icon-atlas.png",iconMapping:{marker:{x:0,y:0,width:128,height:128,mask:!0}},sizeScale:10,sizeUnits:"pixels",selectedPhotoId:t,onPhotoSelect:e,onLabelDataUpdate:o,showLabelConnectors:i,showLabels:n,zoomLevel:a,pickable:!0,autoHighlight:!0,parameters:{depthTest:!1},highlightColor:[255,255,255,150],transitions:{getSize:200,getColor:200,getAngle:{duration:500,easing:e=>e}},onClick:!0,onTap:!0})}const ie={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function ne(e,t,o){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*o):e*t*o/(t+o*e)}function ae(e,t,o,i=.15){return 0===i?function(e,t,o){return Math.max(t,Math.min(e,o))}(e,t,o):e<t?-ne(t-e,o-t,i)+t:e>o?+ne(e-o,o-t,i)+o:e}function re(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function se(e,t,o){return(t=re(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function le(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function ce(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?le(Object(o),!0).forEach((function(t){se(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):le(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const de={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ue(e){return e?e[0].toUpperCase()+e.slice(1):""}const he=["enter","leave"];function pe(e,t="",o=!1){const i=de[e],n=i&&i[t]||t;return"on"+ue(e)+ue(n)+(function(e=!1,t){return e&&!he.includes(t)}(o,n)?"Capture":"")}const me=["gotpointercapture","lostpointercapture"];function ge(e){let t=e.substring(2).toLowerCase();const o=!!~t.indexOf("passive");o&&(t=t.replace("passive",""));const i=me.includes(t)?"capturecapture":"capture",n=!!~t.indexOf(i);return n&&(t=t.replace("capture","")),{device:t,capture:n,passive:o}}function fe(e){return"touches"in e}function ve(e){return fe(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function ye(e){return fe(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function be(e,t){try{const o=t.clientX-e.clientX,i=t.clientY-e.clientY,n=(t.clientX+e.clientX)/2,a=(t.clientY+e.clientY)/2,r=Math.hypot(o,i),s=-180*Math.atan2(o,i)/Math.PI;return{angle:s,distance:r,origin:[n,a]}}catch(o){}return null}function xe(e){return function(e){return Array.from(e.touches).filter((t=>{var o,i;return t.target===e.currentTarget||(null===(o=e.currentTarget)||void 0===o||null===(i=o.contains)||void 0===i?void 0:i.call(o,t.target))}))}(e).map((e=>e.identifier))}function we(e,t){const[o,i]=Array.from(e.touches).filter((e=>t.includes(e.identifier)));return be(o,i)}function _e(e){const t=ye(e);return fe(e)?t.identifier:t.pointerId}function Se(e){const t=ye(e);return[t.clientX,t.clientY]}function ke(e){let{deltaX:t,deltaY:o,deltaMode:i}=e;return 1===i?(t*=40,o*=40):2===i&&(t*=800,o*=800),[t,o]}function Pe(e,...t){return"function"==typeof e?e(...t):e}function Ce(){}function Ee(...e){return 0===e.length?Ce:1===e.length?e[0]:function(){let t;for(const o of e)t=o.apply(this,arguments)||t;return t}}function Me(e,t){return Object.assign({},t,e||{})}class Te{constructor(e,t,o){this.ctrl=e,this.args=t,this.key=o,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:o,args:i}=this;t[o]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,o=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=o.from?Pe(o.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:o,shared:i}=this;t.args=this.args;let n=0;if(e&&(t.event=e,o.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:o,altKey:i,metaKey:n,ctrlKey:a}=e;Object.assign(t,{shiftKey:o,altKey:i,metaKey:n,ctrlKey:a})}return t}(e)),i.down=i.pressed=i.buttons%2==1||i.touches>0,n=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);ie.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[a,r]=t._movement,[s,l]=o.threshold,{_step:c,values:d}=t;if(o.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(a)>=s&&d[0]),!1===c[1]&&(c[1]=Math.abs(r)>=l&&d[1])):(!1===c[0]&&(c[0]=Math.abs(a)>=s&&Math.sign(a)*s),!1===c[1]&&(c[1]=Math.abs(r)>=l&&Math.sign(r)*l)),t.intentional=!1!==c[0]||!1!==c[1],!t.intentional)return;const u=[0,0];if(o.hasCustomTransform){const[e,t]=d;u[0]=!1!==c[0]?e-c[0]:0,u[1]=!1!==c[1]?t-c[1]:0}else u[0]=!1!==c[0]?a-c[0]:0,u[1]=!1!==c[1]?r-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(u);const h=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in o&&(t._bounds=Pe(o.bounds,t)),this.setup&&this.setup()),t.movement=u,this.computeOffset()));const[m,g]=t.offset,[[f,v],[y,b]]=t._bounds;t.overflow=[m<f?-1:m>v?1:0,g<y?-1:g>b?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const x=t._active&&o.rubberband||[0,0];if(t.offset=function(e,[t,o],[i,n]){const[[a,r],[s,l]]=e;return[ae(t,a,r,i),ae(o,s,l,n)]}(t._bounds,t.offset,x),t.delta=ie.sub(t.offset,h),this.computeMovement(),p&&(!t.last||n>32)){t.delta=ie.sub(t.offset,h);const e=t.delta.map(Math.abs);ie.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&n>0&&(t.velocity=[e[0]/n,e[1]/n],t.timeDelta=n)}}emit(){const e=this.state,t=this.shared,o=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!o.triggerAllEvents)return;const i=this.handler(ce(ce(ce({},t),e),{},{[this.aliasKey]:e.values}));void 0!==i&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class Le extends Te{constructor(...e){super(...e),se(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ie.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ie.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,o=this.config;if(!t.axis&&e){const i="object"==typeof o.axisThreshold?o.axisThreshold[ve(e)]:o.axisThreshold;t.axis=function([e,t],o){const i=Math.abs(e),n=Math.abs(t);return i>n&&i>o?"x":n>i&&n>o?"y":void 0}(t._movement,i)}t._blocked=(o.lockDirection||!!o.axis)&&!t.axis||!!o.axis&&o.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const ze=e=>e,Ie={enabled:(e=!0)=>e,eventOptions:(e,t,o)=>ce(ce({},o.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return ie.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?ie.toVector(e):void 0,transform(e,t,o){const i=e||o.shared.transform;return this.hasCustomTransform=!!i,i||ze},threshold:e=>ie.toVector(e,0)},je=ce(ce({},Ie),{},{axis(e,t,{axis:o}){if(this.lockDirection="lock"===o,!this.lockDirection)return o},axisThreshold:(e=0)=>e,bounds(e={}){if("function"==typeof e)return t=>je.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:o=1/0,top:i=-1/0,bottom:n=1/0}=e;return[[t,o],[i,n]]}}),Ae={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};const He="undefined"!=typeof window&&window.document&&window.document.createElement;function Oe(){return He&&"ontouchstart"in window}const Ne={isBrowser:He,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:Oe(),touchscreen:Oe()||He&&window.navigator.maxTouchPoints>1,pointer:He&&"onpointerdown"in window,pointerLock:He&&"exitPointerLock"in window.document},Re={mouse:0,touch:0,pen:8},De=ce(ce({},je),{},{device(e,t,{pointer:{touch:o=!1,lock:i=!1,mouse:n=!1}={}}){return this.pointerLock=i&&Ne.pointerLock,Ne.touch&&o?"touch":this.pointerLock?"mouse":Ne.pointer&&!n?"pointer":Ne.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:o}){if(this.preventScrollDelay="number"==typeof o?o:o||void 0===o&&e?250:void 0,Ne.touchscreen&&!1!==o)return e||(void 0!==o?"y":void 0)},pointerCapture(e,t,{pointer:{capture:o=!0,buttons:i=1,keys:n=!0}={}}){return this.pointerButtons=i,this.keys=n,!this.pointerLock&&"pointer"===this.device&&o},threshold(e,t,{filterTaps:o=!1,tapsThreshold:i=3,axis:n}){const a=ie.toVector(e,o?i:n?1:0);return this.filterTaps=o,this.tapsThreshold=i,a},swipe({velocity:e=.5,distance:t=50,duration:o=250}={}){return{velocity:this.transform(ie.toVector(e)),distance:this.transform(ie.toVector(t)),duration:o}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?ce(ce({},Re),e):Re,keyboardDisplacement:(e=10)=>e});function Be(e){const[t,o]=e.overflow,[i,n]=e._delta,[a,r]=e._direction;(t<0&&i>0&&a<0||t>0&&i<0&&a>0)&&(e._movement[0]=e._movementBound[0]),(o<0&&n>0&&r<0||o>0&&n<0&&r>0)&&(e._movement[1]=e._movementBound[1])}const Ue=ce(ce({},Ie),{},{device(e,t,{shared:o,pointer:{touch:i=!1}={}}){if(o.target&&!Ne.touch&&Ne.gesture)return"gesture";if(Ne.touch&&i)return"touch";if(Ne.touchscreen){if(Ne.pointer)return"pointer";if(Ne.touch)return"touch"}},bounds(e,t,{scaleBounds:o={},angleBounds:i={}}){const n=e=>{const t=Me(Pe(o,e),{min:-1/0,max:1/0});return[t.min,t.max]},a=e=>{const t=Me(Pe(i,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof o&&"function"!=typeof i?[n(),a()]:e=>[n(e),a(e)]},threshold(e,t,o){this.lockDirection="lock"===o.axis;return ie.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e});const Fe=ce(ce({},je),{},{mouseOnly:(e=!0)=>e});const We=je;const Ze=je;const Je=ce(ce({},je),{},{mouseOnly:(e=!0)=>e}),Ke=new Map,Ve=new Map;function Ye(e){Ke.set(e.key,e.engine),Ve.set(e.key,e.resolver)}const Ge={key:"drag",engine:class extends Le{constructor(...e){super(...e),se(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),o=e.currentTarget.getBoundingClientRect(),i={left:t.left-o.left+e.offset[0],right:t.right-o.right+e.offset[0],top:t.top-o.top+e.offset[1],bottom:t.bottom-o.bottom+e.offset[1]};e._bounds=je.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,o=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),i&&i.size>1&&o._pointerActive||(this.start(e),this.setupPointer(e),o._pointerId=_e(e),o._pointerActive=!0,this.computeValues(Se(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==ve(e)?(o._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,o=this.config;if(!t._pointerActive)return;const i=_e(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;const n=Se(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=ie.sub(n,t._values),this.computeValues(n)),ie.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):o.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===o.preventScrollAxis||"xy"===o.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(r){}const t=this.state,o=this.config;if(!t._active||!t._pointerActive)return;const i=_e(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[n,a]=t._distance;if(t.tap=n<=o.tapsThreshold&&a<=o.tapsThreshold,t.tap&&o.filterTaps)t._force=!0;else{const[e,i]=t._delta,[n,a]=t._movement,[r,s]=o.swipe.velocity,[l,c]=o.swipe.distance,d=o.swipe.duration;if(t.elapsedTime<d){const o=Math.abs(e/t.timeDelta),d=Math.abs(i/t.timeDelta);o>r&&Math.abs(n)>l&&(t.swipe[0]=Math.sign(e)),d>s&&Math.abs(a)>c&&(t.swipe[1]=Math.sign(i))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,o=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,o,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,o,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,o,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=Ae[e.key];if(t){const o=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),o._delta=t(this.config.keyboardDisplacement,i),o._keyboardActive=!0,ie.addTo(o._movement,o._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Ae&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:De},Xe={key:"hover",engine:class extends Le{constructor(...e){super(...e),se(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(Se(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;const t=this.state;if(!t._active)return;t._active=!1;const o=Se(e);t._movement=t._delta=ie.sub(o,t._values),this.computeValues(o),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},resolver:Je},qe={key:"move",engine:class extends Le{constructor(...e){super(...e),se(this,"ingKey","moving")}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Se(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=Se(e),o=this.state;o._delta=ie.sub(t,o._values),ie.addTo(o._movement,o._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},resolver:Fe},$e={key:"pinch",engine:class extends Te{constructor(...e){super(...e),se(this,"ingKey","pinching"),se(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:o}=this.state;this.state.offset="wheel"===e?ie.add(t,o):[(1+t[0])*o[0],t[1]+o[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,o]=e._movement;if(!e.axis){const i=30*Math.abs(t)-Math.abs(o);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,o=this.ctrl.touchIds;if(t._active&&t._touchIds.every((e=>o.has(e))))return;if(o.size<2)return;this.start(e),t._touchIds=Array.from(o).slice(0,2);const i=we(e,t._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,o=t._pointerEvents,i=this.ctrl.pointerIds;if(t._active&&Array.from(o.keys()).every((e=>i.has(e))))return;if(o.size<2&&o.set(e.pointerId,e),t._pointerEvents.size<2)return;this.start(e);const n=be(...Array.from(o.values()));n&&this.pinchStart(e,n)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=we(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const o=be(...Array.from(t.values()));o&&this.pinchMove(e,o)}pinchMove(e,t){const o=this.state,i=o._values[1],n=t.angle-i;let a=0;Math.abs(n)>270&&(a+=Math.sign(n)),this.computeValues([t.distance,t.angle-360*a]),o.origin=t.origin,o.turns=a,o._movement=[o._values[0]/o._initial[0]-1,o._values[1]-o._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((e=>!this.ctrl.touchIds.has(e)))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(o){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const o=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=ie.sub(t._movement,o),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!(Array.isArray(t)?t.find((t=>e[t])):e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const t=this.state;t._delta=[-ke(e)[1]/100*t.offset[0],0],ie.addTo(t._movement,t._delta),Be(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:Ue},Qe={key:"scroll",engine:class extends Le{constructor(...e){super(...e),se(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,o=function(e){var t,o;const{scrollX:i,scrollY:n,scrollLeft:a,scrollTop:r}=e.currentTarget;return[null!==(t=null!=i?i:a)&&void 0!==t?t:0,null!==(o=null!=n?n:r)&&void 0!==o?o:0]}(e);t._delta=ie.sub(o,t._values),ie.addTo(t._movement,t._delta),this.computeValues(o),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},resolver:We},et={key:"wheel",engine:class extends Le{constructor(...e){super(...e),se(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=ke(e),ie.addTo(t._movement,t._delta),Be(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:Ze};function tt(e,t){if(null==e)return{};var o,i,n=function(e,t){if(null==e)return{};var o,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)o=a[i],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)o=a[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}const ot={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(Ne.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},it=["target","eventOptions","window","enabled","transform"];function nt(e={},t){const o={};for(const[i,n]of Object.entries(t))switch(typeof n){case"function":o[i]=n.call(o,e[i],i,e);break;case"object":o[i]=nt(e[i],n);break;case"boolean":n&&(o[i]=e[i])}return o}class at{constructor(e,t){se(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,o,i,n){const a=this._listeners,r=function(e,t=""){const o=de[e];return e+(o&&o[t]||t)}(t,o),s=ce(ce({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),n);e.addEventListener(r,i,s);const l=()=>{e.removeEventListener(r,i,s),a.delete(l)};return a.add(l),l}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class rt{constructor(){se(this,"_timeouts",new Map)}add(e,t,o=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,o,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class st{constructor(e){se(this,"gestures",new Set),se(this,"_targetEventStore",new at(this)),se(this,"gestureEventStores",{}),se(this,"gestureTimeoutStores",{}),se(this,"handlers",{}),se(this,"config",{}),se(this,"pointerIds",new Set),se(this,"touchIds",new Set),se(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&lt(e,"drag");t.wheel&&lt(e,"wheel");t.scroll&&lt(e,"scroll");t.move&&lt(e,"move");t.pinch&&lt(e,"pinch");t.hover&&lt(e,"hover")}(this,e)}setEventIds(e){return fe(e)?(this.touchIds=new Set(xe(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,o={}){const i=e,{target:n,eventOptions:a,window:r,enabled:s,transform:l}=i,c=tt(i,it);if(o.shared=nt({target:n,eventOptions:a,window:r,enabled:s,transform:l},ot),t){const e=Ve.get(t);o[t]=nt(ce({shared:o.shared},c),e)}else for(const d in c){const e=Ve.get(d);e&&(o[d]=nt(ce({shared:o.shared},c[d]),e))}return o}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,o={};let i;if(!t.target||(i=t.target(),i)){if(t.enabled){for(const t of this.gestures){const n=this.config[t],a=ct(o,n.eventOptions,!!i);if(n.enabled){new(Ke.get(t))(this,e,t).bind(a)}}const n=ct(o,t.eventOptions,!!i);for(const t in this.nativeHandlers)n(t,"",(o=>this.nativeHandlers[t](ce(ce({},this.state.shared),{},{event:o,args:e}))),void 0,!0)}for(const e in o)o[e]=Ee(...o[e]);if(!i)return o;for(const e in o){const{device:t,capture:n,passive:a}=ge(e);this._targetEventStore.add(i,t,"",o[e],{capture:n,passive:a})}}}}function lt(e,t){e.gestures.add(t),e.gestureEventStores[t]=new at(e,t),e.gestureTimeoutStores[t]=new rt}const ct=(e,t,o)=>(i,n,a,r={},s=!1)=>{var l,c;const d=null!==(l=r.capture)&&void 0!==l?l:t.capture,u=null!==(c=r.passive)&&void 0!==c?c:t.passive;let h=s?i:pe(i,n,d);o&&u&&(h+="Passive"),e[h]=e[h]||[],e[h].push(a)},dt=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ut(e,t,o,i,n,a){if(!e.has(o))return;if(!Ke.has(i))return;const r=o+"Start",s=o+"End";n[i]=e=>{let i;return e.first&&r in t&&t[r](e),o in t&&(i=t[o](e)),e.last&&s in t&&t[s](e),i},a[i]=a[i]||{}}function ht(e,t){const[o,i,n]=function(e){const t={},o={},i=new Set;for(let n in e)dt.test(n)?(i.add(RegExp.lastMatch),o[n]=e[n]):t[n]=e[n];return[o,t,i]}(e),a={};return ut(n,o,"onDrag","drag",a,t),ut(n,o,"onWheel","wheel",a,t),ut(n,o,"onScroll","scroll",a,t),ut(n,o,"onPinch","pinch",a,t),ut(n,o,"onMove","move",a,t),ut(n,o,"onHover","hover",a,t),{handlers:a,config:t,nativeHandlers:i}}function pt(e){return e.forEach(Ye),function(e,t){const{handlers:o,nativeHandlers:i,config:n}=ht(e,t||{});return function(e,t={},o,i){const n=a.useMemo((()=>new st(e)),[]);if(n.applyHandlers(e,i),n.applyConfig(t,o),a.useEffect(n.effect.bind(n)),a.useEffect((()=>n.clean.bind(n)),[]),void 0===t.target)return n.bind.bind(n)}(o,n,void 0,i)}}const mt={Zuni:{title:'Zuni: "Living Laboratory"',coordinates:{latitude:35.0695,longitude:-108.8484,location:"New Mexico"},photos:{landscape:"P.48.1.13",portrait:"P.48.1.24"},sections:{History:'In 1539, Esteban, an African slave from a shipwrecked Spanish vessel, "discovered" the Zuni. By 1540, Francisco Vásquez de Coronado followed Esteban\'s path and conquered the Zuni Pueblo for Spain. Pueblo culture and religious practices were suppressed with the establishment of Santa Fe by the Spanish in 1610. From 1680-1692, the Zuni and Hopi led the Pueblo Revolt, defeating the Spanish and forcing their withdrawal from Santa Fe. By 1848, the Zuni were absorbed into the United States by the resolution of the Mexican-American War with no legal title to their land, and in 1877 the Zuni Reservation was established.\n\nIn 1879, the Bureau of American Ethnology (BAE) focused on the Zuni in the first federally-funded anthropological study. The Zuni were considered to be an ideal society to study given their resistance to conversion and the continuity of their core beliefs. Their ancient ruins and culture were believed to be key to revealing the origins of North American civilization. By the late 19th century, the Zuni had become a living laboratory for anthropologists.',"Origin Story":'The Zuni creation story tells of a journey from the "unlovely place," interpreted as hell, to the "Middle Place," or heaven. From four underground chambers, Zuni, not yet fully formed humans, emerged with the help of twin war gods, Āh-ai-ū-ta and Mā-ā-sē-we. The gods summoned a water creature to lie on the ground and mark the spot where its heart lay, signifying where their destined home would be. Their creation story emphasizes the importance of "place" in Zuni and a deep longing for a sense of belonging on earth.',"Landscape / Location":"The present-day place of Zuni origin is called Chimik'yana'kya De'y'a, also known as Ribbon Falls, on Bright Angel Creek located at the bottom of the Grand Canyon National Park.\n\nZuni who first settled in western New Mexico along the Rio Zuni – which flows into the Little Colorado River – established the village known as Tkāp-quē-nā, or Hot Spring. Some believe that this spring could be the origin place of the Zuni, sprung from the underworld through this natural pool."},visual_references:{"Coronado attacking Zuni-Cibola":!0,"BAE Reports":!0,"Ribbon Falls":!0,"Hot Spring (Tkāp-quē-nā)":!0}},Hopi:{title:'Hopi: "People of Long Ago"',coordinates:{latitude:35.8756,longitude:-110.6068,location:"Arizona"},photos:{landscape:"P.48.1.20",portrait:"p.48.1.5"},sections:{History:'The Hopi have inhabited villages like Old Oraibi since 1150. Their ancestors are known as Histatsinom, or "people of long ago." From 1540 to 1821, the Hopi endured Spanish attempts at conquest and conversion. From 1629 until 1680, the Hopi faced intense "encomienda", or forced labor. This period of Spanish control led to the Pueblo Revolts.\n\nIn 1858, Mormon Jacob Hamblin established relations with the Hopi, believing they were descendants of the Nephites from the Book of Mormon. This began decades of Mormon missions. By 1874, Hopi chief Tuuvi allowed Hamblin to settle at Moenkopi. Hamblin then led Bureau of Ethnographer founder John Wesley Powell to the Hopi, marking the beginning of Hopi as subjects of anthropology. These interactions shaped the early decades of anthropology.',"Origin Story":'The Hopi emerged from under the earth. They were instructed by Maasaw (earth or death god) that the earth was a gift to them, but they must be mindful and care for it. After emerging, the Hopi went in search for Tuuwanasavi, or the "center place." As they journeyed, they placed spiral insignias to mark their path. They settled where a bright light had shown down on the land, the Hopitutskwa.',"Landscape / Location":'Old Oraibi in Northern Arizona is believed to be the oldest continuously inhabited village in North America. It was settled in 1150. Near Oraibi, there is a sacred place known to the Hopi as Prophecy Rock. It includes an account of Koyaansquatsi, or "world out of balance", where the inhabitants of the earth are afflicted by disease, misery, and doubt, etched into the stone\'s face.'},visual_references:{"Old Oraibi":!0,"Mormon Jacob Hamblin":!0,"Image depicting Nephi being baptized according to the LDS scripture":!0,"Oraibi Terraced Homes":!0,"Prophecy Rock":!0}},"Diné":{title:'Diné: "Stewards of the Earth"',coordinates:{latitude:36.12,longitude:-111.23,location:"Arizona"},photos:{landscape:"P.48.1.11",portrait:"P.48.1.1"},sections:{History:"The Diné live in the northeastern part of Arizona and the northwestern corner of New Mexico, surrounding the Hopi peoples' territory. They are also known as the Navajo, which originated from Spanish missionaries who called them Apaches de Nabajó.","Origin Story":'Tradition states that the Diné emerged from the "lower worlds" to inhabit Dinétah, the Diné ancestral homelands. Oral traditions are a daily custom and way of education as well as communication among the Diné. Their legendary lore is used to maintain traditional religious knowledge and tribal history, and Diné folklore is often used to teach moral and ethical lessons for children. It is also used as a way to connect as a community.',"Landscape / Location":"Dine ancestral homelands are marked by four sacred mountains created by Diyin Dine'é (Holy People) – Sisnaajini (Blanka Peak) and Dibé Ntsaa (Hesperus Peak) in Colorado, Tsoodzill (Mount Taylor) in New Mexico, and Dook'o'oosliid (the San Francisco Peaks) in Arizona. These mountains etched a protected area into the landscape for Diné to steward and practice their cultural ceremonies."},visual_references:{"Artistic Rendering of Origin Story":!0,"Sisnaajini (Blanca Peak)":!0,"Diné Ntsaa (Hesperus Peak)":!0,"Tsoodzill (Mount Taylor)":!0,"Dook'o'oosliid (San Francisco Peaks)":!0}}};const gt=()=>{const{appMode:t,storyType:o,STORY_TYPES:i,exitStoryMode:n}=function(){const t=e.useContext(bt);if(!t)throw new Error("useAppContext must be used within an AppContext.Provider");return t}();let a=null;o===i.DINE?a="Diné":o===i.HOPI?a="Hopi":o===i.ZUNI&&(a="Zuni");const r=a?mt[a]||null:null;return r&&a?y.jsxs("div",{className:"tribal-info-panel",children:[y.jsxs("div",{className:"tribal-info-header",children:[y.jsx("h2",{className:"geographica-hand",children:r.title}),y.jsx("button",{className:"close-button",onClick:n,children:"×"})]}),y.jsx("div",{className:"tribal-info-content aldine-regular",children:Object.entries(r.sections).map((([e,t])=>y.jsxs("div",{className:"tribal-info-section",children:[y.jsx("h3",{children:e}),y.jsx("div",{className:"section-content",children:t.split("\n\n").map(((e,t)=>y.jsx("p",{children:e},t)))})]},e)))})]}):null},ft=$("assets/geojson/mapBoxStyle.json"),vt={HOME:"home",EXPLORE:"explore",STORY:"story"},yt={DINE:"dine",HOPI:"hopi",ZUNI:"zuni",HILLERS:"hillers",JACKSON:"jackson",YELLOWSTONE:"yellowstone",GRAND_CANYON:"grand_canyon",CHACO_CULTURE:"chaco_culture",ETHNOGRAPHY:"ethnography"},bt=e.createContext({handlePhotoSelect:()=>{},returnToHomeView:()=>{},enterExploreMode:()=>{},enterStoryMode:()=>{},exitStoryMode:()=>{},appMode:vt.HOME,storyType:null,STORY_TYPES:{},APP_MODES:{}});function xt(){const[t,o]=e.useState(null),[i,n]=e.useState(null),[a,s]=e.useState(null),l=G(),[c,d]=e.useState(vt.HOME),[u,h]=e.useState(null),[p,m]=e.useState(null),[g,f]=e.useState({navajo:!0,hopi:!0,zuni:!0,others:!1}),[v,b]=e.useState(!1),[x,w]=e.useState(!0),[_,S]=e.useState(1),[k,P]=e.useState(!1),[C,E]=e.useState(2);e.useState(!0);const[M,T]=e.useState(!1),[L,z]=e.useState(0),[I,j]=e.useState(0),[A,H]=e.useState(0),[O,N]=e.useState(1),[R,D]=e.useState([]);e.useCallback((e=>{f((t=>({...t,[e]:!t[e]})))}),[]),e.useCallback((()=>{const e=g.navajo&&g.hopi&&g.zuni&&g.others;f({navajo:!e,hopi:!e,zuni:!e,others:!e})}),[g]);const B=a||l;e.useEffect((()=>{te.current&&(window.deckInstance=te.current)}),[]);const U=e.useRef(B.zoom);e.useEffect((()=>{if(Math.abs(B.longitude-Y.longitude)<.01&&Math.abs(B.latitude-Y.latitude)<.01&&Math.abs(B.zoom-Y.zoom)<.1?d(vt.HOME):B.zoom>=7.5?d(vt.EXPLORE):c===vt.STORY||d(vt.HOME),i){const e=ee(i);if(e&&e.coordinates){const t=((e,t,o,i)=>{const n=(o-e)*Math.PI/180,a=(i-t)*Math.PI/180,r=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e*Math.PI/180)*Math.cos(o*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371})(B.latitude,B.longitude,e.coordinates.latitude,e.coordinates.longitude)<100&&B.zoom>=7.5;t&&!x?(w(!0),S(1)):!t&&x&&(S(0),setTimeout((()=>w(!1)),300))}}(U.current<7.5&&B.zoom>=7.5||U.current>=7.5&&B.zoom<7.5)&&(B.zoom>=7.5?(S(0),setTimeout((()=>w(!1)),300)):i||(w(!0),setTimeout((()=>S(1)),100))),U.current=B.zoom}),[B.latitude,B.longitude,B.zoom,i,c]);const{gestureBindings:F,goToHomeView:W}=function(e,t,o,i){const n=()=>{var n,a;t&&t(null);const s=3e3;((null==(a=null==(n=window.deckInstance)?void 0:n.deck)?void 0:a.viewState)||{}).zoom,Y.zoom<7.5&&(o&&o(!0),setTimeout((()=>{i&&i(1)}),2700)),e({...Y,transitionDuration:s,transitionInterpolator:new r({speed:1.2,curve:1.5,screenSpeed:15,maxDuration:s}),transitionEasing:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2})};return{gestureBindings:(a={onDrag:({delta:[e,t],direction:[o],touches:i,first:a,movement:[r]})=>{3===i&&o<0?r<-100&&n():1===i&&o<0&&r<-200&&n()}},pt([Ge,$e,Qe,et,qe,Xe])(a,s||{})),goToHomeView:n};var a,s}(s,n,w,S),Z=e.useCallback((()=>{n(null),h(null),m(null),P(!1),f({navajo:!0,hopi:!0,zuni:!0,others:!1}),d(vt.HOME),W()}),[W]),J=e.useCallback(((e={})=>{d(vt.EXPLORE),h(null);const t={...Y,zoom:8.5,pitch:50,bearing:-15};s({...t,...e,transitionDuration:2500,transitionInterpolator:new r({speed:1.2,curve:1.5,screenSpeed:15})})}),[]),K=e.useCallback(((e,t={})=>{if(!yt[e])return;const o=document.querySelector(".main-title");o&&(o.style.opacity="0",o.style.transition="none");const i=document.querySelector(".main-title + h2");i&&(i.style.opacity="0",i.style.transition="none"),document.querySelectorAll(".category-title").forEach((e=>{e.style.opacity="0",e.style.transition="none"})),document.querySelectorAll(".category-item").forEach((t=>{if(t.classList.contains(`${e}-category`)){t.style.transition="all 0.6s ease-out";const o=""!==t.closest("div").style.right;t.style.transform=o?"translateX(-2vw)":"translateX(2vw)",t.style.fontSize="ETHNOGRAPHY"===e||"DINE"===e||"HOPI"===e||"ZUNI"===e?"5rem":"3rem"}else t.style.opacity="0",t.style.transition="none",t.style.pointerEvents="none"}));const a=document.querySelector(".explore-button");a&&(a.style.opacity="0",a.style.transition="none"),d(vt.STORY),h(yt[e]),m(e),n(null),"DINE"===e?f({navajo:!0,hopi:!1,zuni:!1,others:!1}):"HOPI"===e?f({navajo:!1,hopi:!0,zuni:!1,others:!1}):"ZUNI"===e&&f({navajo:!1,hopi:!1,zuni:!0,others:!1});let l={zoom:7.5,pitch:40,bearing:0};"HILLERS"===e&&(l={longitude:-109.948693,latitude:35.332032,zoom:8.74,pitch:51.55,bearing:-19.1,fov:60}),l={...l,...t},s({...Y,...l,transitionDuration:3e3,transitionInterpolator:new r({speed:1,curve:1.5,screenSpeed:10})})}),[]),V=e.useCallback((()=>{m(null),Z()}),[Z]),Q=e.useRef(null),te=e.useRef(null),ie=e.useCallback((e=>{var t;try{const o=ee(e);if(!o)return;const i=3e3,a=500;d(vt.EXPLORE),setTimeout((()=>{n(e),z(0),j(0),H(0),N(1)}),i-a),f({navajo:!1,hopi:!1,zuni:!1,others:!1}),B.zoom<7.5&&(S(0),setTimeout((()=>{w(!1)}),300));const l=null==(t=o.camera)?void 0:t.viewpoint;if(!l)return;let c=o.camera.pitch||60;c<0&&(c=0),c>85&&(c=85),document.body.style.backgroundColor="rgba(0,255,0,0.1)",setTimeout((()=>document.body.style.backgroundColor=""),100);const u={longitude:l.longitude,latitude:l.latitude,zoom:o.camera.zoom||15,pitch:c,bearing:o.camera.bearing||0,transitionDuration:i,transitionInterpolator:new r({speed:1.2,curve:1.5,screenSpeed:15,maxDuration:i}),transitionEasing:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2};s(u)}catch(i){o(`Failed to select photo: ${i.message}`)}}),[]),ne=e.useCallback((e=>{D(e)}),[]),ae=e.useCallback((()=>{if(!R||0===R.length)return[];let e=[...R];return"HILLERS"===p?e=e.filter((e=>"Hillers"===e.photographer)):"JACKSON"===p&&(e=e.filter((e=>"Jackson"===e.photographer))),e.sort(((e,t)=>t.markerPosition[1]-e.markerPosition[1])),[e.map((e=>({...e,isPhotographerHeader:!1})))]}),[R,p]),re=e.useMemo((()=>[oe({onPhotoSelect:ie,selectedPhotoId:i,onLabelDataUpdate:ne,showLabelConnectors:M,showLabels:k,zoomLevel:B.zoom,filterPhotographer:"HILLERS"===p?"Hillers":"JACKSON"===p?"Jackson":null})]),[i,ie,L,I,A,O,ne,M,R,C,p]),se=i?ee(i):null,[le,ce]=e.useState({visible:!1,x:0,y:0});e.useEffect((()=>{const e=e=>{const t=document.querySelector(".deck-canvas");if(t){const o=t.getBoundingClientRect(),i=e.clientX-o.left,n=e.clientY-o.top;ce({visible:!0,x:i,y:n}),setTimeout((()=>{ce({visible:!1,x:i,y:n})}),800)}};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]);const de=e.useMemo((()=>({handlePhotoSelect:ie,returnToHomeView:Z,enterExploreMode:J,enterStoryMode:K,exitStoryMode:V,appMode:c,storyType:u,APP_MODES:vt,STORY_TYPES:yt})),[ie,Z,J,K,V,c,u]);return y.jsx(bt.Provider,{value:de,children:y.jsxs("div",{ref:Q,style:{width:"100vw",height:"100vh",position:"relative",touchAction:"none"},...F(),children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"\n        @keyframes spin360 {\n          from { transform: rotate(0deg) scale(1); }\n          50% { transform: rotate(180deg) scale(1.5); }\n          to { transform: rotate(360deg) scale(1); }\n        }\n        \n        @keyframes fadeOut {\n          from { opacity: 1; }\n          to { opacity: 0; }\n        }\n        \n        .rotation-indicator {\n          position: absolute;\n          width: 50px;\n          height: 50px;\n          border: 3px solid white;\n          border-radius: 50%;\n          pointer-events: none;\n          z-index: 1000;\n          transform-origin: center;\n          animation: spin360 0.8s ease-out, fadeOut 0.8s ease-out;\n        }\n      "}}),le.visible&&y.jsx("div",{className:"rotation-indicator",style:{left:le.x-25+"px",top:le.y-25+"px"}}),("HILLERS"===p||"JACKSON"===p)&&y.jsx("div",{className:"photo-labels-container",style:{position:"absolute",top:"HILLERS"===p?"calc(5vw + 4rem)":"JACKSON"===p?"calc(6vw + 7rem)":"15vh",right:"20px",bottom:"15vh",width:"350px",paddingRight:"10px",zIndex:10,pointerEvents:"none",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-start",background:"transparent",border:"none",maxHeight:"70vh",padding:"0",margin:"0"},children:ae().map(((e,t)=>y.jsx("div",{style:{display:"flex",flexDirection:"column",width:"100%",paddingTop:"15px"},children:e.map(((e,t)=>y.jsx("div",{className:"photo-label","data-photographer":e.photographer,style:{margin:"0",backgroundColor:"rgba(0, 0, 0, 0)",color:"white",padding:"0",fontSize:"1.3rem",lineHeight:"1.1",fontWeight:"500",cursor:"pointer",pointerEvents:"auto",width:"100%",transition:"all 0.2s ease-out",opacity:i===e.id?1:.8,transform:"scale(1)",boxShadow:"none",textAlign:"left",height:"1.5rem",display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:"5px",borderLeft:i===e.id?"Jackson"===e.photographer?"3px solid rgb(255, 87, 51)":"3px solid rgb(75, 144, 226)":"3px solid transparent",textShadow:"0px 0px 8px rgba(0,0,0,1), 0px 0px 4px #000, 0px 0px 2px #000"},onClick:()=>ie(e.id),children:e.label},e.id)))},`column-${t}`)))}),(B.longitude!==Y.longitude||B.latitude!==Y.latitude||B.zoom!==Y.zoom)&&y.jsx("div",{onClick:Z,style:{position:"absolute",bottom:"5vw",..."HILLERS"===p||"JACKSON"===p?{left:"50%",transform:"translateX(-50%)"}:{right:"5vw"},zIndex:15,background:"transparent",border:"none",borderRadius:"8px",width:"128px",height:"128px",overflow:"visible",cursor:"pointer"},title:"Return to home view (you can also swipe left with three fingers or long drag left)",children:y.jsxs("div",{style:{width:"120px",height:"120px",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"4px",position:"absolute",top:"4px",left:"4px",backgroundColor:"transparent",overflow:"hidden"},children:[y.jsx("div",{style:{position:"absolute",top:-4,left:-4,width:"calc(100% + 8px)",height:"calc(100% + 8px)",borderRadius:"8px",border:"4px solid rgb(255, 255, 255)",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",pointerEvents:"none",zIndex:2}}),y.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:`url(https://api.mapbox.com/styles/v1/mapbox/satellite-v9/static/-110.2,36.5,4.5,0/120x120@2x?attribution=false&logo=false&access_token=${X})`,backgroundSize:"cover",backgroundPosition:"center",opacity:1}}),y.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:[y.jsx("svg",{width:"120",height:"120",viewBox:"0 0 120 120",style:{position:"absolute",top:0,left:0},children:y.jsx("path",{d:"M22 42 C38 30 50 33 60 33 C75 33 90 42 105 48 C102 60 97 72 90 82 C75 90 60 87 38 75 C22 60 22 42 22 42 Z",fill:"hsla(0, 99%, 61%, 0.5)",strokeWidth:"1.5",stroke:"hsl(0, 99%, 41%)"})}),y.jsx("svg",{width:"120",height:"120",viewBox:"0 0 120 120",style:{position:"absolute",top:0,left:0},children:y.jsx("circle",{cx:"60",cy:"57",r:"12",fill:"hsla(294, 66%, 34%, 0.5)",strokeWidth:"1.5",stroke:"hsl(294, 66%, 24%)"})}),y.jsx("svg",{width:"120",height:"120",viewBox:"0 0 120 120",style:{position:"absolute",top:0,left:0},children:y.jsx("path",{d:"M38 72 L57 82 L68 72 L53 60 Z",fill:"hsla(249, 70%, 59%, 0.5)",strokeWidth:"1.5",stroke:"hsl(249, 70%, 39%)"})})]}),y.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to bottom, rgba(255,255,255,0.1) 0%, rgba(0,0,0,0.1) 100%)",pointerEvents:"none"}}),y.jsx("div",{style:{position:"absolute",border:"1px solid rgba(0, 0, 0, 0.5)",backgroundColor:"rgba(255, 255, 255, 1)",borderRadius:"50%",width:"10px",height:"10px",transform:"translate(-50%, -50%)",left:`${Math.min(Math.max((B.longitude+118)/16*100,0),100)}%`,top:`${Math.min(Math.max((45-B.latitude)/15*100,0),100)}%`,pointerEvents:"none",transition:"all 0.3s ease-out",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)",zIndex:1}})]})}),B.zoom<7.5&&!p&&y.jsxs("div",{style:{position:"absolute",top:"2vw",left:"2vw",zIndex:10},children:[y.jsx("h1",{className:"geographica-hand main-title",style:{margin:0,padding:0,color:"white",fontSize:"6rem",letterSpacing:"0em",textShadow:"3px 3px 6px rgba(0,0,0,0.6)",lineHeight:"1.1"},children:"Tied To The Land"}),y.jsx("h2",{className:"aldine-regular",style:{margin:"0.5rem 0 0 0",padding:0,color:"white",fontSize:"2.5rem",maxWidth:"45vw",textShadow:"2px 2px 4px rgba(0,0,0,0.6)",lineHeight:"1.2"},children:"Explore the Jackson-Hillers photographs situated in original Indigenous territories and their history."})]}),(B.zoom<7.5||"DINE"===p||"HOPI"===p||"ZUNI"===p)&&y.jsxs("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",left:"8vw",zIndex:10,maxWidth:"30vw",background:"transparent",opacity:1,transition:"opacity 0.3s",pointerEvents:"auto"},children:[y.jsx("h2",{className:"geographica-hand category-title",style:{margin:0,padding:0,color:"white",fontSize:"4rem",textShadow:"rgba(0, 0, 0, 0.8) 3px 3px 8px",lineHeight:1.1,textAlign:"left",cursor:"pointer",transition:c===vt.STORY?"none":"opacity 0.3s",opacity:!p||"DINE"!==p&&"HOPI"!==p&&"ZUNI"!==p?1:0,pointerEvents:p?"none":"auto"},children:"The People"}),y.jsx("div",{className:"aldine-regular",style:{margin:"0.5rem 0 0",padding:0,color:"white",fontSize:"2rem",textShadow:"rgba(0, 0, 0, 0.6) 2px 2px 4px",lineHeight:1.4,textAlign:"left",display:"flex",flexDirection:"column"},children:y.jsxs("div",{style:{transition:"opacity 0.3s"},children:[y.jsx("div",{style:{marginTop:"0.5rem",opacity:1,transition:"opacity 0.3s, transform 0.5s ease-out",pointerEvents:"auto",position:"relative"},children:y.jsx("span",{className:"geographica-hand category-item DINE-category",style:{color:"white",fontSize:"DINE"===p?"5rem":"3.5rem",textShadow:"rgba(0, 0, 0, 0.8) 3px 3px 8px",lineHeight:1.1,cursor:"pointer",transition:c===vt.STORY?"DINE"===p?"all 0.6s ease-out":"none":"all 0.6s ease-out",WebkitTapHighlightColor:"transparent",userSelect:"none",opacity:p&&"DINE"!==p?0:1,transform:"DINE"===p?"translateX(2vw)":"translateX(0)"},onClick:()=>{K("DINE")},children:"Diné"})}),y.jsx("div",{style:{marginTop:"0.5rem",opacity:1,transition:"opacity 0.3s, transform 0.5s ease-out",pointerEvents:"auto",position:"relative"},children:y.jsx("span",{className:"geographica-hand category-item HOPI-category",style:{color:"white",fontSize:"HOPI"===p?"5rem":"3.5rem",textShadow:"rgba(0, 0, 0, 0.8) 3px 3px 8px",lineHeight:1.1,cursor:"pointer",transition:c===vt.STORY?"HOPI"===p?"all 0.6s ease-out":"none":"all 0.6s ease-out",WebkitTapHighlightColor:"transparent",userSelect:"none",opacity:p&&"HOPI"!==p?0:1,transform:"HOPI"===p?"translateX(2vw)":"translateX(0)"},onClick:()=>{K("HOPI")},children:"Hopi"})}),y.jsx("div",{style:{marginTop:"0.5rem",opacity:1,transition:"opacity 0.3s, transform 0.5s ease-out",pointerEvents:"auto",position:"relative"},children:y.jsx("span",{className:"geographica-hand category-item ZUNI-category",style:{color:"white",fontSize:"ZUNI"===p?"5rem":"3.5rem",textShadow:"rgba(0, 0, 0, 0.8) 3px 3px 8px",lineHeight:1.1,cursor:"pointer",transition:c===vt.STORY?"ZUNI"===p?"all 0.6s ease-out":"none":"all 0.6s ease-out",WebkitTapHighlightColor:"transparent",userSelect:"none",opacity:p&&"ZUNI"!==p?0:1,transform:"ZUNI"===p?"translateX(2vw)":"translateX(0)"},onClick:()=>{K("ZUNI")},children:"Zuni"})})]})})]}),(B.zoom<7.5||"HILLERS"===p||"JACKSON"===p)&&y.jsxs("div",{style:{position:"absolute",top:"2vw",right:"2vw",zIndex:10,maxWidth:"30vw",background:"transparent",opacity:"DINE"===p||"HOPI"===p||"ZUNI"===p?0:1,transition:"opacity 0.3s, maxWidth 0.3s",pointerEvents:"auto"},children:[y.jsx("h2",{className:"geographica-hand category-title",style:{margin:0,padding:0,color:"white",fontSize:"4rem",textShadow:"rgba(0, 0, 0, 0.8) 3px 3px 8px",lineHeight:1.1,textAlign:"right",cursor:"pointer",opacity:!p||"HILLERS"!==p&&"JACKSON"!==p?1:0,transition:"opacity 0.3s",pointerEvents:p?"none":"auto"},children:"The Photographers"}),y.jsxs("div",{className:"aldine-regular",style:{margin:"0.5rem 0 0",padding:0,color:"white",fontSize:"2rem",textShadow:"rgba(0, 0, 0, 0.8) 3px 3px 8px",lineHeight:1.4,textAlign:"right",display:"flex",flexDirection:"column"},children:[y.jsx("span",{className:"category-item HILLERS-category",style:{cursor:"pointer",opacity:p&&"HILLERS"!==p?0:1,transition:"all 0.6s ease-out",pointerEvents:"auto",fontSize:"HILLERS"===p?"3rem":"2rem",WebkitTapHighlightColor:"transparent",userSelect:"none",position:"relative",zIndex:"auto",whiteSpace:"nowrap",transform:"HILLERS"===p?"translateX(-2vw)":"translateX(0)"},onClick:()=>{"HILLERS"===p?(m(null),P(!1),s({...Y,transitionDuration:2e3,transitionInterpolator:new r({speed:1.2,curve:1.5,screenSpeed:15})})):(m("HILLERS"),P(!0),s({longitude:-109.948693,latitude:35.332032,zoom:8.74,pitch:51.55,bearing:-19.1,fov:60,transitionDuration:2500,transitionInterpolator:new r({speed:1.2,curve:1.5,screenSpeed:15})})),d(vt.HOME)},children:"John K. Hillers"}),y.jsx("span",{className:"category-item JACKSON-category",style:{cursor:"pointer",opacity:p&&"JACKSON"!==p?0:1,transition:"all 0.6s ease-out",pointerEvents:"auto",fontSize:"JACKSON"===p?"3rem":"2rem",WebkitTapHighlightColor:"transparent",userSelect:"none",position:"relative",zIndex:"auto",whiteSpace:"nowrap",transform:"JACKSON"===p?"translateX(-2vw)":"translateX(0)"},onClick:()=>{"JACKSON"===p?(m(null),P(!1),s({...Y,transitionDuration:2e3,transitionInterpolator:new r({speed:1.2,curve:1.5,screenSpeed:15})})):(m("JACKSON"),P(!0),s({longitude:-107.888988,latitude:39.093789,zoom:7.66,pitch:64.22,bearing:-26.51,fov:60,transitionDuration:2500,transitionInterpolator:new r({speed:1.2,curve:1.5,screenSpeed:15})})),d(vt.HOME)},children:"William Henry Jackson"})]})]}),c===vt.STORY&&y.jsx("div",{onClick:V,style:{position:"absolute",top:"5vw",left:"5vw",zIndex:20,cursor:"pointer",padding:"15px",borderRadius:"50%",background:"rgba(0, 0, 0, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",transition:"all 0.2s ease-out",opacity:.8},onMouseOver:e=>{e.currentTarget.style.transform="scale(1.1)",e.currentTarget.style.opacity="1",e.currentTarget.style.background="rgba(0, 0, 0, 0.6)"},onMouseOut:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.opacity="0.8",e.currentTarget.style.background="rgba(0, 0, 0, 0.4)"},children:y.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"white"})})}),t&&y.jsxs("div",{style:{position:"absolute",top:50,left:10,zIndex:10,background:"red",color:"white",padding:"10px"},children:["Error: ",t]}),se&&x&&y.jsxs("div",{style:{position:"absolute",top:10,right:10,zIndex:10,background:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"6px",width:"450px",boxShadow:"0 2px 15px rgba(0,0,0,0.4)",maxHeight:"90vh",overflowY:"auto",animation:"fadeIn 500ms ease-in-out forwards"},children:[y.jsx("div",{style:{position:"absolute",top:"5px",right:"5px"},children:y.jsx("button",{onClick:()=>n(null),style:{padding:"3px 6px",background:"rgba(0,0,0,0.15)",color:"#333",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"×"})}),y.jsx("div",{style:{border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",maxHeight:"500px",display:"flex",justifyContent:"center",alignItems:"center",background:"#f5f5f5",margin:"0 0 10px 0"},children:y.jsx("img",{src:se.image_url.startsWith("http")?se.image_url:$(se.image_url.replace(/^\//,"")),alt:se.name,style:{maxWidth:"100%",maxHeight:"500px",objectFit:"contain"}})}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[y.jsxs("div",{style:{flex:"1"},children:[y.jsx("h3",{className:"aldine-bold",style:{margin:"0 0 2px 0",fontSize:"18px"},children:se.name}),y.jsxs("p",{className:"aldine-text",style:{margin:"0",fontSize:"14px",color:"Jackson"===se.photographer?"#c43e1c":"#2761ac"},children:[se.photographer,", ",se.year]})]}),y.jsxs("div",{style:{flex:"1",textAlign:"right",fontSize:"12px",color:"#555"},children:[y.jsx("p",{style:{margin:"0"},children:"Jackson"===se.photographer?"Western US Geological Survey":"Bureau of American Ethnology"}),y.jsx("p",{style:{margin:"0",fontStyle:"italic"},children:"Jackson"===se.photographer?"1875-1876":"1879"})]})]}),y.jsx("p",{className:"aldine-text",style:{margin:"0 0 10px 0",fontSize:"14px",lineHeight:"1.4"},children:se.description}),y.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"8px",padding:"6px",background:"rgba(0,0,0,0.03)",borderRadius:"4px"},children:y.jsxs("p",{style:{margin:"0",fontStyle:"italic"},children:["Indigenous territories documentary photography -","Jackson"===se.photographer?" Part of early extensive photographic expeditions documenting the Southwest.":" Some of the earliest photographic record of traditional Pueblo life."]})})]}),y.jsx(q,{styleUrl:ft,layers:re,viewState:a,onViewStateChange:({viewState:e})=>{s(e)},territoriesVisible:g,showMapboxMarkers:v,deckRef:te}),y.jsx(gt,{})]})})}b.createRoot(document.getElementById("root")).render(y.jsx(xt,{}));
