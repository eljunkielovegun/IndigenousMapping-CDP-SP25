import{r as e,D as t,C as o,I as i,T as n,M as r,B as s,R as a,F as l}from"./deck-1653c3be.js";import{r as c,_ as d}from"./vendor-f8f05838.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var u={exports:{}},p={},h=e,m=Symbol.for("react.element"),g=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,v=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function b(e,t,o){var i,n={},r=null,s=null;for(i in void 0!==o&&(r=""+o),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(s=t.ref),t)f.call(t,i)&&!y.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===n[i]&&(n[i]=t[i]);return{$$typeof:m,type:e,key:r,ref:s,props:n,_owner:v.current}}p.Fragment=g,p.jsx=b,p.jsxs=b,u.exports=p;var x=u.exports,_={},w=c;_.createRoot=w.createRoot,_.hydrateRoot=w.hydrateRoot;const S=e.createContext(null);function k(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!k(e[o],t[o]))return!1;return!0}if(Array.isArray(t))return!1;if("object"==typeof e&&"object"==typeof t){const o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(const n of o){if(!t.hasOwnProperty(n))return!1;if(!k(e[n],t[n]))return!1}return!0}return!1}function j(e,t){if(!e.getProjection)return;const o=e.getProjection();k(o,t.getProjection())||t.setProjection(o)}function P(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function C(e,t){const o=t.viewState||t;let i=!1;if("zoom"in o){const t=e.zoom;e.zoom=o.zoom,i=i||t!==e.zoom}if("bearing"in o){const t=e.bearing;e.bearing=o.bearing,i=i||t!==e.bearing}if("pitch"in o){const t=e.pitch;e.pitch=o.pitch,i=i||t!==e.pitch}if(o.padding&&!e.isPaddingEqual(o.padding)&&(i=!0,e.padding=o.padding),"longitude"in o&&"latitude"in o){const t=e.center;e.center=new t.constructor(o.longitude,o.latitude),i=i||t!==e.center}return i}const E=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function M(e){if(!e)return null;if("string"==typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const i of e.layers)t[i.id]=i;const o=e.layers.map((e=>{let o=null;"interactive"in e&&(o=Object.assign({},e),delete o.interactive);const i=t[e.ref];if(i){o=o||Object.assign({},e),delete o.ref;for(const e of E)e in i&&(o[e]=i[e])}return o||e}));return{...e,layers:o}}const T={version:8,sources:{},layers:[]},z={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},L={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},I={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},A=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],O=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class R{constructor(e,t,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[I[e.type]];t?t(e):e.type},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[z[e.type]];t&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[L[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const o=this._updateSettings(e,t);o&&this._createShadowTransform(this._map);const i=this._updateSize(e),n=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(o||i||n&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const o=R.savedMaps.pop();if(!o)return null;const i=o.map,n=i.getContainer();for(t.className=n.className;n.childNodes.length>0;)t.appendChild(n.childNodes[0]);i._container=t;const r=i._resizeObserver;r&&(r.disconnect(),r.observe(t)),o.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:s}=e;return s&&(s.bounds?i.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):o._updateViewState(s,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",(()=>i.fire("load"))),i._update(),o}_initialize(e){const{props:t}=this,{mapStyle:o=T}=t,i={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||D()||null,container:e,style:M(o)},n=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[n.longitude||0,n.latitude||0],zoom:n.zoom||0,pitch:n.pitch||0,bearing:n.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const r=new this._MapClass(i);n.padding&&r.setPadding(n.padding),t.cursor&&(r.getCanvas().style.cursor=t.cursor),this._createShadowTransform(r);const s=r._render;r._render=e=>{this._inRender=!0,s.call(r,e),this._inRender=!1};const a=r._renderTaskQueue.run;r._renderTaskQueue.run=e=>{a.call(r._renderTaskQueue,e),this._onBeforeRepaint()},r.on("render",(()=>this._onAfterRepaint()));const l=r.fire;r.fire=this._fireEvent.bind(this,l),r.on("resize",(()=>{this._renderTransform.resize(r.transform.width,r.transform.height)})),r.on("styledata",(()=>{this._updateStyleComponents(this.props,{}),j(r.transform,this._renderTransform)})),r.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const c in z)r.on(c,this._onPointerEvent);for(const c in L)r.on(c,this._onCameraEvent);for(const c in I)r.on(c,this._onEvent);this._map=r}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");null==e||e.remove(),R.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const o=this._map,i=this._renderTransform,{zoom:n,pitch:r,bearing:s}=i,a=o.isMoving();a&&(i.cameraElevationReference="sea");const l=C(i,{...P(o.transform),...e});if(a&&(i.cameraElevationReference="ground"),l&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=n!==i.zoom),e.rotate||(e.rotate=s!==i.bearing),e.pitch||(e.pitch=r!==i.pitch)}return a||C(o.transform,e),l}_updateSettings(e,t){const o=this._map;let i=!1;for(const n of A)if(n in e&&!k(e[n],t[n])){i=!0;const t=o[`set${n[0].toUpperCase()}${n.slice(1)}`];null==t||t.call(o,e[n])}return i}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){const{mapStyle:t=T,styleDiffing:o=!0}=e,i={diff:o};return"localIdeographFontFamily"in e&&(i.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(M(t),i),!0}return!1}_updateStyleComponents(e,t){const o=this._map;let i=!1;return o.isStyleLoaded()&&("light"in e&&o.setLight&&!k(e.light,t.light)&&(i=!0,o.setLight(e.light)),"fog"in e&&o.setFog&&!k(e.fog,t.fog)&&(i=!0,o.setFog(e.fog)),"terrain"in e&&o.setTerrain&&!k(e.terrain,t.terrain)&&(e.terrain&&!o.getSource(e.terrain.source)||(i=!0,o.setTerrain(e.terrain)))),i}_updateHandlers(e,t){var o,i;const n=this._map;let r=!1;for(const s of O){const a=null===(o=e[s])||void 0===o||o;k(a,null===(i=t[s])||void 0===i||i)||(r=!0,a?n[s].enable(a):n[s].disable())}return r}_queryRenderedFeatures(e){const t=this._map,o=t.transform,{interactiveLayerIds:i=[]}=this.props;try{return t.transform=this._renderTransform,t.queryRenderedFeatures(e,{layers:i.filter(t.getLayer.bind(t))})}catch(n){return[]}finally{t.transform=o}}_updateHover(e){var t;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const o=e.type,i=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0,n=this._queryRenderedFeatures(e.point),r=n.length>0;!r&&i&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=n,r&&!i&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=o}else this._hoveredFeatures=null}_fireEvent(e,t,o){const i=this._map,n=i.transform,r="string"==typeof t?t:t.type;return"move"===r&&this._updateViewState(this.props,!1),r in L&&("object"==typeof t&&(t.viewState=P(n)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,t,o),i.transform=n,i):(e.call(i,t,o),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&e.fire(o);this._internalUpdate=!1;const t=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{j(this._renderTransform,t),e.transform=t}}}function D(){let e=null;if("undefined"!=typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch(t){}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(o){}return e}R.savedMaps=[];const N=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function H(e){if(!e)return null;const t=e.map,o={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:o=>{const i=t.transform;t.transform=e.transform;const n=t.project(o);return t.transform=i,n},unproject:o=>{const i=t.transform;t.transform=e.transform;const n=t.unproject(o);return t.transform=i,n},queryTerrainElevation:(o,i)=>{const n=t.transform;t.transform=e.transform;const r=t.queryTerrainElevation(o,i);return t.transform=n,r},queryRenderedFeatures:(o,i)=>{const n=t.transform;t.transform=e.transform;const r=t.queryRenderedFeatures(o,i);return t.transform=n,r}};for(const i of function(e){const t=new Set;let o=e;for(;o;){for(const i of Object.getOwnPropertyNames(o))"_"!==i[0]&&"function"==typeof e[i]&&"fire"!==i&&"setEventedParent"!==i&&t.add(i);o=Object.getPrototypeOf(o)}return Array.from(t)}(t))i in o||N.includes(i)||(o[i]=t[i].bind(t));return o}const B="undefined"!=typeof document?e.useLayoutEffect:e.useEffect,W=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const F=e.createContext(null);function U(t,o,i){const n=e.useContext(S),[r,s]=e.useState(null),a=e.useRef(),{current:l}=e.useRef({mapLib:null,map:null});e.useEffect((()=>{const e=t.mapLib;let o,r=!0;return Promise.resolve(e||i).then((e=>{if(!r)return;if(!e)throw new Error("Invalid mapLib");const i="Map"in e?e:e.default;if(!i.Map)throw new Error("Invalid mapLib");if(function(e,t){for(const i of W)i in t&&(e[i]=t[i]);const{RTLTextPlugin:o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;o&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(o,(e=>{}),!0)}(i,t),i.supported&&!i.supported(t))throw new Error("Map is not supported by this browser");t.reuseMaps&&(o=R.reuse(t,a.current)),o||(o=new R(i.Map,t,a.current)),l.map=H(o),l.mapLib=i,s(o),null==n||n.onMapMount(l.map,t.id)})).catch((e=>{const{onError:o}=t;o&&o({type:"error",target:null,originalEvent:null,error:e})})),()=>{r=!1,o&&(null==n||n.onMapUnmount(t.id),t.reuseMaps?o.recycle():o.destroy())}}),[]),B((()=>{r&&r.setProps(t)})),e.useImperativeHandle(o,(()=>l.map),[r]);const c=e.useMemo((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return e.createElement("div",{id:t.id,ref:a,style:c},r&&e.createElement(F.Provider,{value:l},e.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},t.children)))}const V=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Z(e,t){if(!e||!t)return;const o=e.style;for(const i in t){const e=t[i];Number.isFinite(e)&&!V.test(i)?o[i]=`${e}px`:o[i]=e}}function K(e){return new Set(e?e.trim().split(/\s+/):[])}function J(t,o,i,n){const r=e.useContext(F),s=e.useMemo((()=>t(r)),[]);return e.useEffect((()=>{const e=n||i||o,t="function"==typeof o&&"function"==typeof i?o:null,a="function"==typeof i?i:"function"==typeof o?o:null,{map:l}=r;return l.hasControl(s)||(l.addControl(s,null==e?void 0:e.position),t&&t(r)),()=>{a&&a(r),l.hasControl(s)&&l.removeControl(s)}}),[]),s}e.memo(e.forwardRef((function(t,o){const{map:i,mapLib:n}=e.useContext(F),r=e.useRef({props:t});r.current.props=t;const s=e.useMemo((()=>{let o=!1;e.Children.forEach(t.children,(e=>{e&&(o=!0)}));const i={...t,element:o?document.createElement("div"):null},a=new n.Marker(i);return a.setLngLat([t.longitude,t.latitude]),a.getElement().addEventListener("click",(e=>{var t,o;null===(o=(t=r.current.props).onClick)||void 0===o||o.call(t,{type:"click",target:a,originalEvent:e})})),a.on("dragstart",(e=>{var t,o;const i=e;i.lngLat=s.getLngLat(),null===(o=(t=r.current.props).onDragStart)||void 0===o||o.call(t,i)})),a.on("drag",(e=>{var t,o;const i=e;i.lngLat=s.getLngLat(),null===(o=(t=r.current.props).onDrag)||void 0===o||o.call(t,i)})),a.on("dragend",(e=>{var t,o;const i=e;i.lngLat=s.getLngLat(),null===(o=(t=r.current.props).onDragEnd)||void 0===o||o.call(t,i)})),a}),[]);e.useEffect((()=>(s.addTo(i.getMap()),()=>{s.remove()})),[]);const{longitude:a,latitude:l,offset:d,style:u,draggable:p=!1,popup:h=null,rotation:m=0,rotationAlignment:g="auto",pitchAlignment:f="auto"}=t;return e.useEffect((()=>{Z(s.getElement(),u)}),[u]),e.useImperativeHandle(o,(()=>s),[]),s.getLngLat().lng===a&&s.getLngLat().lat===l||s.setLngLat([a,l]),d&&!function(e,t){const o=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0;return o===n&&i===r}(s.getOffset(),d)&&s.setOffset(d),s.isDraggable()!==p&&s.setDraggable(p),s.getRotation()!==m&&s.setRotation(m),s.getRotationAlignment()!==g&&s.setRotationAlignment(g),s.getPitchAlignment()!==f&&s.setPitchAlignment(f),s.getPopup()!==h&&s.setPopup(h),c.createPortal(t.children,s.getElement())}))),e.memo(e.forwardRef((function(t,o){const{map:i,mapLib:n}=e.useContext(F),r=e.useMemo((()=>document.createElement("div")),[]),s=e.useRef({props:t});s.current.props=t;const a=e.useMemo((()=>{const e={...t},o=new n.Popup(e);return o.setLngLat([t.longitude,t.latitude]),o.once("open",(e=>{var t,o;null===(o=(t=s.current.props).onOpen)||void 0===o||o.call(t,e)})),o}),[]);if(e.useEffect((()=>{const e=e=>{var t,o;null===(o=(t=s.current.props).onClose)||void 0===o||o.call(t,e)};return a.on("close",e),a.setDOMContent(r).addTo(i.getMap()),()=>{a.off("close",e),a.isOpen()&&a.remove()}}),[]),e.useEffect((()=>{Z(a.getElement(),t.style)}),[t.style]),e.useImperativeHandle(o,(()=>a),[]),a.isOpen()&&(a.getLngLat().lng===t.longitude&&a.getLngLat().lat===t.latitude||a.setLngLat([t.longitude,t.latitude]),t.offset&&!k(a.options.offset,t.offset)&&a.setOffset(t.offset),a.options.anchor===t.anchor&&a.options.maxWidth===t.maxWidth||(a.options.anchor=t.anchor,a.setMaxWidth(t.maxWidth)),a.options.className!==t.className)){const e=K(a.options.className),o=K(t.className);for(const t of e)o.has(t)||a.removeClassName(t);for(const t of o)e.has(t)||a.addClassName(t);a.options.className=t.className}return c.createPortal(t.children,r)}))),e.memo((function(t){const o=J((({mapLib:e})=>new e.AttributionControl(t)),{position:t.position});return e.useEffect((()=>{Z(o._container,t.style)}),[t.style]),null})),e.memo((function(t){const o=J((({mapLib:e})=>new e.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})),{position:t.position});return e.useEffect((()=>{Z(o._controlContainer,t.style)}),[t.style]),null})),e.memo(e.forwardRef((function(t,o){const i=e.useRef({props:t}),n=J((({mapLib:e})=>{const o=new e.GeolocateControl(t),n=o._setupUI;return o._setupUI=e=>{o._container.hasChildNodes()||n(e)},o.on("geolocate",(e=>{var t,o;null===(o=(t=i.current.props).onGeolocate)||void 0===o||o.call(t,e)})),o.on("error",(e=>{var t,o;null===(o=(t=i.current.props).onError)||void 0===o||o.call(t,e)})),o.on("outofmaxbounds",(e=>{var t,o;null===(o=(t=i.current.props).onOutOfMaxBounds)||void 0===o||o.call(t,e)})),o.on("trackuserlocationstart",(e=>{var t,o;null===(o=(t=i.current.props).onTrackUserLocationStart)||void 0===o||o.call(t,e)})),o.on("trackuserlocationend",(e=>{var t,o;null===(o=(t=i.current.props).onTrackUserLocationEnd)||void 0===o||o.call(t,e)})),o}),{position:t.position});return i.current.props=t,e.useImperativeHandle(o,(()=>n),[]),e.useEffect((()=>{Z(n._container,t.style)}),[t.style]),null}))),e.memo((function(t){const o=J((({mapLib:e})=>new e.NavigationControl(t)),{position:t.position});return e.useEffect((()=>{Z(o._container,t.style)}),[t.style]),null})),e.memo((function(t){const o=J((({mapLib:e})=>new e.ScaleControl(t)),{position:t.position}),i=e.useRef(t),n=i.current;i.current=t;const{style:r}=t;return void 0!==t.maxWidth&&t.maxWidth!==n.maxWidth&&(o.options.maxWidth=t.maxWidth),void 0!==t.unit&&t.unit!==n.unit&&o.setUnit(t.unit),e.useEffect((()=>{Z(o._container,r)}),[r]),null}));const Y=d((()=>import("./vendor-f8f05838.js").then((e=>e.m))),["assets/vendor-f8f05838.js","assets/deck-1653c3be.js"]),G=e.forwardRef((function(e,t){return U(e,t,Y)}));const X="pk.eyJ1Ijoic3R1ZGlvLW9ycGltZW50IiwiYSI6ImNtOTFxZGI1ZzAzdDEycnBzbHZhNHdvbHMifQ.4z6bo58xtenHNY2vwt39Gg";function $({styleUrl:o,children:i,layers:n=[],viewState:r,onViewStateChange:s,territoriesVisible:a={navajo:!0,hopi:!0,zuni:!0,others:!1},showMapboxMarkers:l=!1,deckRef:c}){const d={longitude:-111.686256,latitude:37.884571,zoom:5.51,pitch:32.91,bearing:-1.48,maxPitch:85,minZoom:1,maxZoom:20},[u,p]=e.useState(d),[h,m]=e.useState(!1),[g,f]=e.useState(null),v=r||u,y=e.useCallback((()=>{}),[v]);e.useEffect((()=>{const e=e=>{"c"!==e.key&&"C"!==e.key||y()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[y]),e.useEffect((()=>{if(g)try{const e=(e,t)=>{if(t){const t=["==",["get","Slug"],e],o=`territory-${e}`;if(g.getLayer(o))g.setLayoutProperty(o,"visibility","visible");else if(g.getLayer("native-land-territories")){g.getLayer("native-land-territories");g.addLayer({id:o,type:"fill",source:"native-land","source-layer":"4pgB_next_nld_terr_prod_source_layer",filter:t,paint:{"fill-color":"navajo"===e?"hsla(0, 99%, 61%, 0.5)":"hopi"===e?"hsla(294, 66%, 34%, 0.5)":"zuni"===e?"hsla(249, 70%, 59%, 0.5)":"hsla(156, 66%, 34%, 0.3)","fill-outline-color":"navajo"===e?"hsl(0, 99%, 41%)":"hopi"===e?"hsl(294, 66%, 24%)":"zuni"===e?"hsl(249, 70%, 39%)":"hsl(156, 66%, 24%)"}})}}else{const t=`territory-${e}`;g.getLayer(t)&&g.setLayoutProperty(t,"visibility","none")}};if(["native-land-territories","native-land-labels"].forEach((e=>{g.getLayer(e)&&g.setLayoutProperty(e,"visibility","none")})),e("navajo",a.navajo),e("hopi",a.hopi),e("zuni",a.zuni),a.others){const e="territory-others";g.getLayer(e)?g.setLayoutProperty(e,"visibility","visible"):g.addLayer({id:e,type:"fill",source:"native-land","source-layer":"4pgB_next_nld_terr_prod_source_layer",filter:["all",["!=",["get","Slug"],"navajo"],["!=",["get","Slug"],"hopi"],["!=",["get","Slug"],"zuni"]],paint:{"fill-color":"hsla(156, 66%, 34%, 0.3)","fill-outline-color":"hsl(156, 66%, 24%)"}})}else{const e="territory-others";g.getLayer(e)&&g.setLayoutProperty(e,"visibility","none")}}catch(e){}}),[g,a]);const b=(e=>{if(l)return e;const t=JSON.parse(JSON.stringify(e)),o=["expedition-points","expedition-point-labels","origin-destination-markers","origin-destination-labels","general-photo-markers","general-photo-labels"];return t.layers=t.layers.map((e=>o.includes(e.id)?{...e,layout:{...e.layout||{},visibility:"none"}}:e)),t})((e=>{const t=JSON.parse(JSON.stringify(e)),o=a.navajo,i=a.hopi,n=a.zuni,r=a.others;return o||i||n||r?(t.layers=t.layers.map((e=>{if("native-land-territories"===e.id||"native-land-labels"===e.id){const t=["any"];return o&&t.push(["==",["get","Slug"],"navajo"]),i&&t.push(["==",["get","Slug"],"hopi"]),n&&t.push(["==",["get","Slug"],"zuni"]),r&&t.push(["all",["!=",["get","Slug"],"navajo"],["!=",["get","Slug"],"hopi"],["!=",["get","Slug"],"zuni"]]),{...e,filter:t}}return e})),t):(t.layers=t.layers.filter((e=>"native-land-territories"!==e.id&&"native-land-labels"!==e.id)),t)})({version:8,name:"Indigenous Territories Map",sources:{"mapbox-satellite":{type:"raster",url:"mapbox://mapbox.satellite",tileSize:256},"mapbox-dem":{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14},"native-land":{type:"vector",url:"mapbox://nativeland.4pgB_next_nld_terr_prod_layer"},"jackson-expedition-route":{type:"geojson",data:{type:"Feature",properties:{name:"Jackson Expedition Route"},geometry:{type:"LineString",coordinates:[[-111.65,35.19],[-110.87,35.6],[-110.45,35.73],[-110.17,36.31],[-109.87,36.99]]}}},"hillers-expedition-route":{type:"geojson",data:{type:"Feature",properties:{name:"Hillers Expedition Route"},geometry:{type:"LineString",coordinates:[[-110.67,36.92],[-110.5,36.54],[-110.09,36.11],[-109.87,35.83],[-109.54,35.52]]}}},"expedition-points":{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"Canyon de Chelly",expedition:"Jackson",description:"Major photography site"},geometry:{type:"Point",coordinates:[-109.47,36.13]}},{type:"Feature",properties:{name:"Walpi",expedition:"Hillers",description:"Hopi village photography"},geometry:{type:"Point",coordinates:[-110.39,35.87]}},{type:"Feature",properties:{name:"Monument Valley",expedition:"Jackson",description:"Iconic landscape photography"},geometry:{type:"Point",coordinates:[-110.11,36.98]}},{type:"Feature",properties:{name:"Window Rock",expedition:"Hillers",description:"Cultural documentation"},geometry:{type:"Point",coordinates:[-109.05,35.68]}}]}},"chicago-route":{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[-87.63,41.88],[-111.89,40.76],[-110.55,36.15]]}}},"origin-destination-points":{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"Chicago",type:"origin",description:"Starting point for expeditions"},geometry:{type:"Point",coordinates:[-87.63,41.88]}},{type:"Feature",properties:{name:"Washington D.C.",type:"destination",description:"Smithsonian Institution"},geometry:{type:"Point",coordinates:[-77.03,38.9]}},{type:"Feature",properties:{name:"Salt Lake City",type:"waypoint",description:"Supply point for expeditions"},geometry:{type:"Point",coordinates:[-111.89,40.76]}},{type:"Feature",properties:{name:"Mexico City",type:"destination",description:"Exhibition location"},geometry:{type:"Point",coordinates:[-99.13,19.43]}},{type:"Feature",properties:{name:"New York",type:"destination",description:"Exhibition venue"},geometry:{type:"Point",coordinates:[-73.94,40.67]}}]}},"general-image-locations":{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"Chaco Canyon",type:"photo-site",description:"Archaeological site photography"},geometry:{type:"Point",coordinates:[-107.96,36.06]}},{type:"Feature",properties:{name:"Grand Canyon",type:"photo-site",description:"Landscape photography"},geometry:{type:"Point",coordinates:[-112.1129,36.0544]}},{type:"Feature",properties:{name:"Yellowstone",type:"photo-site",description:"National park documentation"},geometry:{type:"Point",coordinates:[-110.58,44.42]}}]}}},sprite:"mapbox://sprites/mapbox/satellite-streets-v12",glyphs:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",terrain:{source:"mapbox-dem",exaggeration:1.2},layers:[{id:"satellite",type:"raster",source:"mapbox-satellite",minzoom:0,maxzoom:22},{id:"native-land-territories",type:"fill",source:"native-land","source-layer":"4pgB_next_nld_terr_prod_source_layer",paint:{"fill-color":["match",["get","Slug"],["navajo"],"hsla(0, 99%, 61%, 0.5)",["hopi"],"hsla(294, 66%, 34%, 0.5)",["zuni"],"hsla(249, 70%, 59%, 0.5)","hsla(156, 66%, 34%, 0.3)"],"fill-outline-color":["match",["get","Slug"],["navajo"],"hsl(0, 99%, 41%)",["hopi"],"hsl(294, 66%, 24%)",["zuni"],"hsl(249, 70%, 39%)","hsl(156, 66%, 24%)"]}},{id:"native-land-labels",type:"symbol",source:"native-land","source-layer":"4pgB_next_nld_terr_prod_source_layer",layout:{"text-field":["get","Name"],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-size":12,"text-max-width":10,"text-variable-anchor":["center"],"text-justify":"center","text-radial-offset":.5},paint:{"text-color":"white","text-halo-color":"rgba(0, 0, 0, 0.7)","text-halo-width":1.5}},{id:"jackson-expedition-route-line",type:"line",source:"jackson-expedition-route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"hsl(199, 100%, 43%)","line-width":6,"line-dasharray":[0,2,1],"line-blur":1}},{id:"hillers-expedition-route-line",type:"line",source:"hillers-expedition-route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"hsla(0, 100%, 61%, 0.83)","line-width":6,"line-dasharray":[0,2,1],"line-blur":1}},{id:"expedition-points",type:"circle",source:"expedition-points",paint:{"circle-radius":10,"circle-color":["match",["get","expedition"],"Jackson","hsl(199, 100%, 43%)","Hillers","hsla(0, 100%, 61%, 0.83)","lightgray"],"circle-stroke-width":3,"circle-stroke-color":"white","circle-blur":.3}},{id:"expedition-point-labels",type:"symbol",source:"expedition-points",layout:{"text-field":["get","name"],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-size":14,"text-offset":[0,-2],"text-anchor":"bottom","text-allow-overlap":!0},paint:{"text-color":"white","text-halo-color":"rgba(0, 0, 0, 0.9)","text-halo-width":2}},{id:"origin-destination-markers",type:"circle",source:"origin-destination-points",paint:{"circle-radius":12,"circle-color":["match",["get","type"],"origin","hsl(54, 100%, 50%)","destination","hsl(54, 100%, 50%)","waypoint","hsl(54, 100%, 40%)","hsl(54, 100%, 50%)"],"circle-stroke-width":3,"circle-stroke-color":"white","circle-blur":.3}},{id:"origin-destination-labels",type:"symbol",source:"origin-destination-points",layout:{"text-field":["get","name"],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-size":16,"text-offset":[0,-2],"text-anchor":"bottom","text-allow-overlap":!0,"text-justify":"center","text-max-width":10},paint:{"text-color":"white","text-halo-color":"rgba(0, 0, 0, 0.9)","text-halo-width":2}},{id:"general-photo-markers",type:"circle",source:"general-image-locations",paint:{"circle-radius":10,"circle-color":"hsl(30, 100%, 50%)","circle-stroke-width":3,"circle-stroke-color":"white","circle-blur":.2}},{id:"general-photo-labels",type:"symbol",source:"general-image-locations",layout:{"text-field":["get","name"],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-size":14,"text-offset":[0,-2],"text-anchor":"bottom","text-allow-overlap":!0},paint:{"text-color":"white","text-halo-color":"rgba(0, 0, 0, 0.9)","text-halo-width":2}},{id:"chicago-to-arizona-line",type:"line",source:"chicago-route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"hsla(54, 72%, 49%, 0.8)","line-width":5,"line-dasharray":[2,1],"line-blur":1}}]}));return e.useEffect((()=>{}),[a]),e.useEffect((()=>{if(g){["expedition-points","expedition-point-labels","origin-destination-markers","origin-destination-labels","general-photo-markers","general-photo-labels"].forEach((e=>{try{g.getLayer(e)&&g.setLayoutProperty(e,"visibility",l?"visible":"none")}catch(t){}}))}}),[g,l]),x.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:x.jsxs(t,{ref:c,initialViewState:d,viewState:v,controller:{dragPan:!0,dragRotate:!0,scrollZoom:!0,touchZoom:!0,touchRotate:!0,doubleClickZoom:!0,keyboard:!0},onViewStateChange:e=>{s&&s(e)},layers:n,onError:e=>{},children:[x.jsx(G,{id:"main",mapboxAccessToken:X,mapStyle:b,attributionControl:!1,logoPosition:"bottom-right",interactive:!0,cooperativeGestures:!1,locale:{"AttributionControl.ToggleAttribution":"","AttributionControl.ChangeAttribution":"","TerrainControl.enableTerrain":"","NavigationControl.ZoomIn":"","NavigationControl.ZoomOut":"","NavigationControl.ResetBearing":"","GeolocateControl.Find":"","GeolocateControl.FindMe":"","ScaleControl.Feet":"","ScaleControl.Meters":"","LogoControl.Title":"","Map.Title":""},onLoad:e=>{m(!0),f(e.target);e.target.getContainer().querySelectorAll(".mapboxgl-ctrl-attrib-inner, .mapboxgl-ctrl-attrib, .mapboxgl-ctrl-logo, .mapboxgl-ctrl-bottom-right").forEach((e=>{e.style.display="none"}))}}),h&&i]})})}function q(e){if(e.startsWith("http")||e.startsWith("data:"))return e;const t=e.startsWith("/")?e.slice(1):e,o="/IndigenousMapping-CDP-SP25/";return(o.endsWith("/")?o:o+"/")+t}$._transitionInProgress=!1,$._lastExternalViewState=null;const Q={"omaha-nebraska":{id:"omaha-nebraska",name:"Omaha, Nebraska",photographer:"Jackson",year:"1867-1869",catalog_ref:"null",description:"null",coordinates:{latitude:41.2565,longitude:-95.9345},elevation_feet:"null",elevation_meters:"nul",image_url:"null"},"mystic-lake":{id:"mystic-lake",name:"Mystic Lake, Montana",photographer:"Jackson",year:"1871-1878",catalog_ref:"P.48.1.7",description:"Mystic Lake, Montana Territory",coordinates:{latitude:45.5453506,longitude:-110.9193637},elevation_feet:6398,elevation_meters:1950,camera:{viewpoint:{latitude:45.543261,longitude:-110.920025,elevation:0},bearing:3.66,pitch:84.73,zoom:17.65,fov:60},overlay:{opacity:.5,bounds:[[-110.924,45.544],[-110.917,45.548]]},image_url:"/assets/img/P.48.1.7.jpg"},"gallatin-headwaters":{id:"gallatin-headwaters",name:"Headwaters of the Gallatin Mountains",photographer:"Jackson",year:"1871-1878",catalog_ref:"P.48.1.16",description:"Headwaters of the Gallatin Mountains",coordinates:{latitude:44.9632,longitude:-111.0573},elevation_feet:8500,elevation_meters:2591,camera:{viewpoint:{latitude:44.963,longitude:-111.058,elevation:8520},bearing:95,pitch:-10,zoom:16.5,fov:50},overlay:{opacity:.5,bounds:[[-111.059,44.9625],[-111.0565,44.964]]},image_url:"/assets/img/P.48.1.16.jpg"},"mammoth-hot-springs":{id:"mammoth-hot-springs",name:"Mammoth Hot Springs",photographer:"Jackson",year:"1871-1878",catalog_ref:"P.48.1.8",description:"Mammoth Hot-Springs Gardiners River [Wyoming]",coordinates:{latitude:44.9772,longitude:-110.7028},elevation_feet:6200,elevation_meters:1889,camera:{viewpoint:{latitude:44.966179,longitude:-110.70984,elevation:0},bearing:-162.95,pitch:85,zoom:17.26,fov:60},overlay:{opacity:.5,bounds:[[-110.707,44.975],[-110.698,44.979]]},image_url:"/assets/img/P.48.1.8.jpg"},"yellowstone-falls":{id:"yellowstone-falls",name:"Great Falls of the Yellowstone",photographer:"Jackson",year:"1871",catalog_ref:"P.48.1.9",description:"Great Falls of the Yellowstone",coordinates:{latitude:44.7181,longitude:-110.4961},elevation_feet:7500,elevation_meters:2286,camera:{viewpoint:{latitude:44.717836,longitude:-110.495424,elevation:0},bearing:-101.29,pitch:84.07,zoom:16.28,fov:60},overlay:{opacity:.5,bounds:[[-110.5,44.715],[-110.492,44.721]]},image_url:"/assets/img/P.48.1.9.jpg"},"holy-cross":{id:"holy-cross",name:"Mountain of the Holy-Cross",photographer:"Jackson",year:"1873",catalog_ref:"P.48.1.2",description:"Mountain of the Holy-Cross",coordinates:{latitude:39.4668,longitude:-106.4817},elevation_feet:14009,elevation_meters:4270,camera:{viewpoint:{latitude:39.462634,longitude:-106.47873,elevation:0},bearing:-126.63,pitch:84.37,zoom:14.07,fov:60},overlay:{opacity:.8,bounds:[[-106.4785,39.4635],[-106.4765,39.4655]],scale:1,aspect:1.33},image_url:"/assets/img/P.48.1.2.jpg"},"mancos-canyon-1":{id:"mancos-canyon-1",name:"Ancient Ruins in the Canyon of the Mancos",photographer:"Jackson",year:"1874-1875",catalog_ref:"P.48.1.29",description:"Ancient Ruins in the Canyon of the Mancos",coordinates:{latitude:37.185,longitude:-108.4925},elevation_feet:7200,elevation_meters:2195,camera:{viewpoint:{latitude:37.337382,longitude:-108.444995,elevation:0},bearing:-84.32,pitch:82.48,zoom:18.37,fov:60},overlay:{opacity:.5,bounds:[[-108.495,37.184],[-108.491,37.186]]},image_url:"/assets/img/P.48.1.29.jpg"},"mancos-canyon-2":{id:"mancos-canyon-2",name:"Ancient Ruins in the Canyon of the Mancos",photographer:"Jackson",year:"1874-1875",catalog_ref:"P.48.1.30",description:"Ancient Ruins in the Canyon of the Mancos",coordinates:{latitude:37.0461,longitude:-108.6956},elevation_feet:6700,elevation_meters:2042,camera:{viewpoint:{latitude:37.335,longitude:-108.435,elevation:6750},bearing:65,pitch:0,zoom:16,fov:55},overlay:{opacity:.5,bounds:[[-108.697,37.045],[-108.694,37.047]]},image_url:"/assets/img/P.48.1.30.jpg"},"walpi-pueblo-1":{id:"walpi-pueblo-1",name:"Walpi Pueblo - East Mesa",photographer:"Jackson",year:"1874-1875",catalog_ref:"P.48.1.28",description:"[The Pueblo of Walpi on the East Mesa opposite Tewa]",coordinates:{latitude:35.8371,longitude:-110.3943},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:37.288492,longitude:-108.474738,elevation:0},bearing:-125.22,pitch:83.47,zoom:17.15,fov:60},overlay:{opacity:.5,bounds:[[-110.3895,35.8285],[-110.388,35.8295]]},image_url:"/assets/img/P.48.1.28.jpg"},"walpi-pueblo-2":{id:"walpi-pueblo-2",name:"Walpi Pueblo - Terraced Houses",photographer:"Hillers",year:"1874-1875",catalog_ref:"P.48.1.20",description:"Terraced Houses at Wolpi [Walpi]",coordinates:{latitude:35.8372,longitude:-110.3944},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.8295,longitude:-110.389,elevation:6240},bearing:140,pitch:-5,zoom:18.5,fov:45},overlay:{opacity:.5,bounds:[[-110.395,35.8365],[-110.3935,35.838]]},image_url:"/assets/img/P.48.1.20.jpg"},"walpi-pueblo-3":{id:"walpi-pueblo-3",name:"Walpi and Shechumavi - Tewa",photographer:"Hillers",year:"1874-1875",catalog_ref:"P.48.1.10",description:"Wolpi [Walpi] and Shechumavi [Sichomovi], from Tewa",coordinates:{latitude:35.8371,longitude:-110.3943},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.8371,longitude:-110.3943,elevation:6725},bearing:180,pitch:0,zoom:15,fov:60},overlay:{opacity:.5,bounds:[[-110.395,35.8365],[-110.3935,35.838]]},image_url:"/assets/img/P.48.1.10.jpg"},"walpi-pueblo-4":{id:"walpi-pueblo-4",name:"Walpi Pueblo - Dance Rock",photographer:"Hillers",year:"1874-1875",catalog_ref:"P.48.1.12",description:"Dance Rock. Wolpi [Walpi]",coordinates:{latitude:35.8371,longitude:-110.3942},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.8371,longitude:-110.3942,elevation:6725},bearing:180,pitch:0,zoom:17,fov:60},overlay:{opacity:.5,bounds:[[-110.395,35.8365],[-110.3935,35.838]]},image_url:"/assets/img/P.48.1.12.jpg"},"montezuma-canyon":{id:"montezuma-canyon",name:"Montezuma Canyon",photographer:"Jackson",year:"1874-1876",catalog_ref:"P.48.1.31",description:"Ruins in the Montezuma Canyon",coordinates:{latitude:37.387,longitude:-109.3062},elevation_feet:5800,elevation_meters:1768,camera:{viewpoint:{latitude:37.385507,longitude:-109.305991,elevation:0},bearing:5.98,pitch:80.86,zoom:18.66,fov:60},overlay:{opacity:.5,bounds:[[-109.308,37.386],[-109.305,37.388]]},image_url:"/assets/img/P.48.1.31.jpg"},"walpi-pueblo-5":{id:"walpi-pueblo-5",name:"Walpi Pueblo - Weaving",photographer:"Hillers",year:"1879",catalog_ref:"P.48.1.22",description:"A Moki [Hopi] Weaving [Walpi]",coordinates:{latitude:35.8373,longitude:-110.3945},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.828917,longitude:-110.38844,elevation:0},bearing:-42.22,pitch:80.97,zoom:19.81,fov:60},overlay:{opacity:.5,bounds:[[-110.3886,35.829],[-110.3882,35.8293]]},image_url:"/assets/img/P.48.1.22.jpg"},"grand-canyon":{id:"grand-canyon",name:"Grand Canyon [Arizona]",photographer:"Hillers",year:"1872",catalog_ref:"null",description:"Grand Canyon [Arizona]",coordinates:{latitude:36.0544,longitude:-112.1129},elevation_feet:1e4,elevation_meters:3e3,camera:{viewpoint:{latitude:36.0544,longitude:-112.1401,elevation:7500},bearing:180,pitch:-15,zoom:12,fov:70},overlay:{opacity:.5,bounds:[[-112.143,36.053],[-112.11,36.056]]},image_url:"null"},nevada:{id:"nevada",name:"Nevada",photographer:"Hillers",year:"1873",catalog_ref:"null",description:"Nevada",coordinates:{latitude:39.773978,longitude:-116.618156},elevation_feet:15e3,elevation_meters:4500,camera:{viewpoint:{latitude:39.7739,longitude:-116.6181,elevation:6e3},bearing:210,pitch:5,zoom:12,fov:65},overlay:{opacity:.5,bounds:[[-116.62,39.772],[-116.616,39.776]]},image_url:"null"},arizona:{id:"arizona",name:"Arizona",photographer:"Hillers",year:"1873, 1881",catalog_ref:"null",description:"Arizona",coordinates:{latitude:34.300692,longitude:-111.566677},elevation_feet:1e4,elevation_meters:3e3,camera:{viewpoint:{latitude:34.3006,longitude:-111.5666,elevation:5e3},bearing:150,pitch:0,zoom:13,fov:60},overlay:{opacity:.5,bounds:[[-111.568,34.299],[-111.565,34.302]]},image_url:"null"},utah:{id:"utah",name:"Utah",photographer:"Hillers",year:"1874",catalog_ref:"null",description:"Utah",coordinates:{latitude:39.240763,longitude:-111.74984},elevation_feet:12e3,elevation_meters:3600,camera:{viewpoint:{latitude:39.2407,longitude:-111.7498,elevation:6e3},bearing:180,pitch:0,zoom:13,fov:60},overlay:{opacity:.5,bounds:[[-111.751,39.239],[-111.748,39.242]]},image_url:"null"},"southwestern-colorado":{id:"southwestern-colorado",name:"Southwestern Colorado",photographer:"Jackson",year:"1874-1875",catalog_ref:"null",description:"Southwestern Colorado",coordinates:{latitude:38.068095,longitude:-107.684383},elevation_feet:7800,elevation_meters:2375,camera:{viewpoint:{latitude:38.068,longitude:-107.6843,elevation:7800},bearing:180,pitch:0,zoom:13,fov:60},overlay:{opacity:.5,bounds:[[-107.686,38.067],[-107.683,38.069]]},image_url:"null"},"oklahoma-territory":{id:"oklahoma-territory",name:'Oklahoma "Indian Territory"',photographer:"Hillers",year:"1875",catalog_ref:"null",description:'Oklahoma "Indian Territory"',coordinates:{latitude:33.185,longitude:-98.63},elevation_feet:1050,elevation_meters:320,camera:{viewpoint:{latitude:33.185,longitude:-98.63,elevation:1050},bearing:180,pitch:0,zoom:13,fov:60},overlay:{opacity:.5,bounds:[[-98.632,33.184],[-98.628,33.186]]},image_url:"null"},"zuni-eagle":{id:"zuni-eagle",name:"A Zuni Eagle Cage",photographer:"Hillers",year:"1879",catalog_ref:"P.48.1.3",description:"A Zuni Eagle Cage",coordinates:{latitude:35.0695,longitude:-108.8484},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:35.0695,longitude:-108.8484,elevation:6300},bearing:0,pitch:0,zoom:19,fov:50},overlay:{opacity:.5,bounds:[[-108.849,35.069],[-108.848,35.07]]},image_url:"/assets/img/P.48.1.3.jpg"},"navajo-joganda":{id:"navajo-joganda",name:"A Navajo Joganda",photographer:"Hillers",year:"null",catalog_ref:"P.48.1.11",description:"A Navajo Joganda, [Hogan]",coordinates:{latitude:36.12,longitude:-111.23},elevation_feet:6725,elevation_meters:2050,camera:{viewpoint:{latitude:36.12,longitude:-111.23,elevation:6300},bearing:150,pitch:0,zoom:18,fov:55},overlay:{opacity:.5,bounds:[[-111.231,36.119],[-111.229,36.121]]},image_url:"/assets/img/P.48.1.11.jpg"},"central-mexico":{id:"central-mexico",name:"Central Mexico",photographer:"Hillers",year:"1880-1907",catalog_ref:"null",description:"Central Mexico",coordinates:{latitude:22.614328,longitude:-101.672974},elevation_feet:7800,elevation_meters:2375,camera:{viewpoint:{latitude:22.6143,longitude:-101.6729,elevation:7800},bearing:180,pitch:0,zoom:13,fov:60},overlay:{opacity:.5,bounds:[[-101.674,22.613],[-101.671,22.616]]},image_url:"null"}};function ee(e){return Q[e]||null}class te extends o{onClick(e){if(!e)return!1;const{onPhotoSelect:t}=this.props;return!(!e.object||!t)&&(document.body.style.backgroundColor="rgba(255,255,0,0.1)",setTimeout((()=>document.body.style.backgroundColor=""),100),t(e.object.id),!0)}onTap(e){if(!e)return!1;const{onPhotoSelect:t}=this.props;return!(!e.object||!t)&&(document.body.style.backgroundColor="rgba(0,255,255,0.1)",setTimeout((()=>document.body.style.backgroundColor=""),100),t(e.object.id),!0)}onHover(e){e&&e.target&&e.target.getCanvas&&(e.object?e.target.getCanvas().style.cursor="pointer":e.target.getCanvas().style.cursor="grab")}renderLayers(){const{data:e,iconAtlas:t,iconMapping:o,sizeScale:r,selectedPhotoId:s}=this.props;return[new i(this.getSubLayerProps({id:"marker-outlines",data:e,iconAtlas:t,iconMapping:o,getIcon:e=>"marker",getPosition:e=>[e.coordinates.longitude,e.coordinates.latitude],getSize:e=>s===e.id?4:3,getColor:[255,255,255],sizeScale:10,sizeUnits:"pixels",sizeMinPixels:40,sizeMaxPixels:80,billboard:!0,pickable:!0,parameters:{depthTest:!1}})),new i(this.getSubLayerProps({id:"marker-icons",data:e,iconAtlas:t,iconMapping:o,getIcon:e=>"marker",getPosition:e=>[e.coordinates.longitude,e.coordinates.latitude],getSize:e=>s===e.id?3.5:2.5,getColor:e=>"Jackson"===e.photographer?[255,87,51]:[75,144,226],sizeScale:10,sizeUnits:"pixels",sizeMinPixels:35,sizeMaxPixels:70,billboard:!0,pickable:!0,parameters:{depthTest:!1},getTooltip:({object:e})=>e&&`${e.name} (${e.year||"unknown"})\nPhotographer: ${e.photographer}`})),new n(this.getSubLayerProps({id:"marker-labels",data:e,getPosition:e=>[e.coordinates.longitude,e.coordinates.latitude],getText:e=>e.name,getSize:10,getColor:[255,255,255,230],getBackgroundColor:[0,0,0,160],fontFamily:"Arial, Helvetica, sans-serif",fontWeight:"normal",getTextAnchor:"middle",getAlignmentBaseline:"top",getPixelOffset:[0,18],backgroundPadding:[2,1],billboard:!0,pickable:!1,parameters:{depthTest:!1}}))]}}function oe({onPhotoSelect:e=()=>{},selectedPhotoId:t=null}={}){const o=Object.values(Q),i=o.filter((e=>{if(!e.coordinates)return!1;const{longitude:t,latitude:o}=e.coordinates;return null!=t&&null!=o&&"null"!==t&&"null"!==o&&!isNaN(parseFloat(t))&&!isNaN(parseFloat(o))&&!(Math.abs(t)>180||Math.abs(o)>90)}));return i.forEach((e=>{e.camera&&e.camera.viewpoint||(e.camera=e.camera||{},e.camera.viewpoint=e.camera.viewpoint||{longitude:e.coordinates.longitude,latitude:e.coordinates.latitude,elevation:1e3},e.camera.bearing=e.camera.bearing||0,e.camera.pitch=e.camera.pitch||60,e.camera.zoom=e.camera.zoom||14,e.camera.fov=e.camera.fov||60)})),new te({id:"photo-markers-composite",data:i,iconAtlas:"https://raw.githubusercontent.com/visgl/deck.gl-data/master/website/icon-atlas.png",iconMapping:{marker:{x:0,y:0,width:128,height:128,mask:!0}},sizeScale:10,sizeUnits:"pixels",selectedPhotoId:t,onPhotoSelect:e,pickable:!0,autoHighlight:!0,parameters:{depthTest:!1},highlightColor:[255,255,255,150],transitions:{getSize:200,getColor:200}})}const ie={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function ne(e,t,o){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*o):e*t*o/(t+o*e)}function re(e,t,o,i=.15){return 0===i?function(e,t,o){return Math.max(t,Math.min(e,o))}(e,t,o):e<t?-ne(t-e,o-t,i)+t:e>o?+ne(e-o,o-t,i)+o:e}function se(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function ae(e,t,o){return(t=se(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function le(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function ce(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?le(Object(o),!0).forEach((function(t){ae(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):le(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const de={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ue(e){return e?e[0].toUpperCase()+e.slice(1):""}const pe=["enter","leave"];function he(e,t="",o=!1){const i=de[e],n=i&&i[t]||t;return"on"+ue(e)+ue(n)+(function(e=!1,t){return e&&!pe.includes(t)}(o,n)?"Capture":"")}const me=["gotpointercapture","lostpointercapture"];function ge(e){let t=e.substring(2).toLowerCase();const o=!!~t.indexOf("passive");o&&(t=t.replace("passive",""));const i=me.includes(t)?"capturecapture":"capture",n=!!~t.indexOf(i);return n&&(t=t.replace("capture","")),{device:t,capture:n,passive:o}}function fe(e){return"touches"in e}function ve(e){return fe(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function ye(e){return fe(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function be(e,t){try{const o=t.clientX-e.clientX,i=t.clientY-e.clientY,n=(t.clientX+e.clientX)/2,r=(t.clientY+e.clientY)/2,s=Math.hypot(o,i),a=-180*Math.atan2(o,i)/Math.PI;return{angle:a,distance:s,origin:[n,r]}}catch(o){}return null}function xe(e){return function(e){return Array.from(e.touches).filter((t=>{var o,i;return t.target===e.currentTarget||(null===(o=e.currentTarget)||void 0===o||null===(i=o.contains)||void 0===i?void 0:i.call(o,t.target))}))}(e).map((e=>e.identifier))}function _e(e,t){const[o,i]=Array.from(e.touches).filter((e=>t.includes(e.identifier)));return be(o,i)}function we(e){const t=ye(e);return fe(e)?t.identifier:t.pointerId}function Se(e){const t=ye(e);return[t.clientX,t.clientY]}function ke(e){let{deltaX:t,deltaY:o,deltaMode:i}=e;return 1===i?(t*=40,o*=40):2===i&&(t*=800,o*=800),[t,o]}function je(e,...t){return"function"==typeof e?e(...t):e}function Pe(){}function Ce(...e){return 0===e.length?Pe:1===e.length?e[0]:function(){let t;for(const o of e)t=o.apply(this,arguments)||t;return t}}function Ee(e,t){return Object.assign({},t,e||{})}class Me{constructor(e,t,o){this.ctrl=e,this.args=t,this.key=o,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:o,args:i}=this;t[o]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,o=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=o.from?je(o.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:o,shared:i}=this;t.args=this.args;let n=0;if(e&&(t.event=e,o.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:o,altKey:i,metaKey:n,ctrlKey:r}=e;Object.assign(t,{shiftKey:o,altKey:i,metaKey:n,ctrlKey:r})}return t}(e)),i.down=i.pressed=i.buttons%2==1||i.touches>0,n=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);ie.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[r,s]=t._movement,[a,l]=o.threshold,{_step:c,values:d}=t;if(o.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(r)>=a&&d[0]),!1===c[1]&&(c[1]=Math.abs(s)>=l&&d[1])):(!1===c[0]&&(c[0]=Math.abs(r)>=a&&Math.sign(r)*a),!1===c[1]&&(c[1]=Math.abs(s)>=l&&Math.sign(s)*l)),t.intentional=!1!==c[0]||!1!==c[1],!t.intentional)return;const u=[0,0];if(o.hasCustomTransform){const[e,t]=d;u[0]=!1!==c[0]?e-c[0]:0,u[1]=!1!==c[1]?t-c[1]:0}else u[0]=!1!==c[0]?r-c[0]:0,u[1]=!1!==c[1]?s-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(u);const p=t.offset,h=t._active&&!t._blocked||t.active;h&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in o&&(t._bounds=je(o.bounds,t)),this.setup&&this.setup()),t.movement=u,this.computeOffset()));const[m,g]=t.offset,[[f,v],[y,b]]=t._bounds;t.overflow=[m<f?-1:m>v?1:0,g<y?-1:g>b?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const x=t._active&&o.rubberband||[0,0];if(t.offset=function(e,[t,o],[i,n]){const[[r,s],[a,l]]=e;return[re(t,r,s,i),re(o,a,l,n)]}(t._bounds,t.offset,x),t.delta=ie.sub(t.offset,p),this.computeMovement(),h&&(!t.last||n>32)){t.delta=ie.sub(t.offset,p);const e=t.delta.map(Math.abs);ie.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&n>0&&(t.velocity=[e[0]/n,e[1]/n],t.timeDelta=n)}}emit(){const e=this.state,t=this.shared,o=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!o.triggerAllEvents)return;const i=this.handler(ce(ce(ce({},t),e),{},{[this.aliasKey]:e.values}));void 0!==i&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class Te extends Me{constructor(...e){super(...e),ae(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ie.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ie.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,o=this.config;if(!t.axis&&e){const i="object"==typeof o.axisThreshold?o.axisThreshold[ve(e)]:o.axisThreshold;t.axis=function([e,t],o){const i=Math.abs(e),n=Math.abs(t);return i>n&&i>o?"x":n>i&&n>o?"y":void 0}(t._movement,i)}t._blocked=(o.lockDirection||!!o.axis)&&!t.axis||!!o.axis&&o.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const ze=e=>e,Le={enabled:(e=!0)=>e,eventOptions:(e,t,o)=>ce(ce({},o.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return ie.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?ie.toVector(e):void 0,transform(e,t,o){const i=e||o.shared.transform;return this.hasCustomTransform=!!i,i||ze},threshold:e=>ie.toVector(e,0)},Ie=ce(ce({},Le),{},{axis(e,t,{axis:o}){if(this.lockDirection="lock"===o,!this.lockDirection)return o},axisThreshold:(e=0)=>e,bounds(e={}){if("function"==typeof e)return t=>Ie.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:o=1/0,top:i=-1/0,bottom:n=1/0}=e;return[[t,o],[i,n]]}}),Ae={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};const Oe="undefined"!=typeof window&&window.document&&window.document.createElement;function Re(){return Oe&&"ontouchstart"in window}const De={isBrowser:Oe,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:Re(),touchscreen:Re()||Oe&&window.navigator.maxTouchPoints>1,pointer:Oe&&"onpointerdown"in window,pointerLock:Oe&&"exitPointerLock"in window.document},Ne={mouse:0,touch:0,pen:8},He=ce(ce({},Ie),{},{device(e,t,{pointer:{touch:o=!1,lock:i=!1,mouse:n=!1}={}}){return this.pointerLock=i&&De.pointerLock,De.touch&&o?"touch":this.pointerLock?"mouse":De.pointer&&!n?"pointer":De.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:o}){if(this.preventScrollDelay="number"==typeof o?o:o||void 0===o&&e?250:void 0,De.touchscreen&&!1!==o)return e||(void 0!==o?"y":void 0)},pointerCapture(e,t,{pointer:{capture:o=!0,buttons:i=1,keys:n=!0}={}}){return this.pointerButtons=i,this.keys=n,!this.pointerLock&&"pointer"===this.device&&o},threshold(e,t,{filterTaps:o=!1,tapsThreshold:i=3,axis:n}){const r=ie.toVector(e,o?i:n?1:0);return this.filterTaps=o,this.tapsThreshold=i,r},swipe({velocity:e=.5,distance:t=50,duration:o=250}={}){return{velocity:this.transform(ie.toVector(e)),distance:this.transform(ie.toVector(t)),duration:o}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?ce(ce({},Ne),e):Ne,keyboardDisplacement:(e=10)=>e});function Be(e){const[t,o]=e.overflow,[i,n]=e._delta,[r,s]=e._direction;(t<0&&i>0&&r<0||t>0&&i<0&&r>0)&&(e._movement[0]=e._movementBound[0]),(o<0&&n>0&&s<0||o>0&&n<0&&s>0)&&(e._movement[1]=e._movementBound[1])}const We=ce(ce({},Le),{},{device(e,t,{shared:o,pointer:{touch:i=!1}={}}){if(o.target&&!De.touch&&De.gesture)return"gesture";if(De.touch&&i)return"touch";if(De.touchscreen){if(De.pointer)return"pointer";if(De.touch)return"touch"}},bounds(e,t,{scaleBounds:o={},angleBounds:i={}}){const n=e=>{const t=Ee(je(o,e),{min:-1/0,max:1/0});return[t.min,t.max]},r=e=>{const t=Ee(je(i,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof o&&"function"!=typeof i?[n(),r()]:e=>[n(e),r(e)]},threshold(e,t,o){this.lockDirection="lock"===o.axis;return ie.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e});const Fe=ce(ce({},Ie),{},{mouseOnly:(e=!0)=>e});const Ue=Ie;const Ve=Ie;const Ze=ce(ce({},Ie),{},{mouseOnly:(e=!0)=>e}),Ke=new Map,Je=new Map;function Ye(e){Ke.set(e.key,e.engine),Je.set(e.key,e.resolver)}const Ge={key:"drag",engine:class extends Te{constructor(...e){super(...e),ae(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),o=e.currentTarget.getBoundingClientRect(),i={left:t.left-o.left+e.offset[0],right:t.right-o.right+e.offset[0],top:t.top-o.top+e.offset[1],bottom:t.bottom-o.bottom+e.offset[1]};e._bounds=Ie.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,o=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),i&&i.size>1&&o._pointerActive||(this.start(e),this.setupPointer(e),o._pointerId=we(e),o._pointerActive=!0,this.computeValues(Se(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==ve(e)?(o._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,o=this.config;if(!t._pointerActive)return;const i=we(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;const n=Se(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=ie.sub(n,t._values),this.computeValues(n)),ie.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):o.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===o.preventScrollAxis||"xy"===o.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(s){}const t=this.state,o=this.config;if(!t._active||!t._pointerActive)return;const i=we(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[n,r]=t._distance;if(t.tap=n<=o.tapsThreshold&&r<=o.tapsThreshold,t.tap&&o.filterTaps)t._force=!0;else{const[e,i]=t._delta,[n,r]=t._movement,[s,a]=o.swipe.velocity,[l,c]=o.swipe.distance,d=o.swipe.duration;if(t.elapsedTime<d){const o=Math.abs(e/t.timeDelta),d=Math.abs(i/t.timeDelta);o>s&&Math.abs(n)>l&&(t.swipe[0]=Math.sign(e)),d>a&&Math.abs(r)>c&&(t.swipe[1]=Math.sign(i))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,o=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,o,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,o,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,o,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=Ae[e.key];if(t){const o=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),o._delta=t(this.config.keyboardDisplacement,i),o._keyboardActive=!0,ie.addTo(o._movement,o._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Ae&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:He},Xe={key:"hover",engine:class extends Te{constructor(...e){super(...e),ae(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(Se(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;const t=this.state;if(!t._active)return;t._active=!1;const o=Se(e);t._movement=t._delta=ie.sub(o,t._values),this.computeValues(o),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},resolver:Ze},$e={key:"move",engine:class extends Te{constructor(...e){super(...e),ae(this,"ingKey","moving")}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Se(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=Se(e),o=this.state;o._delta=ie.sub(t,o._values),ie.addTo(o._movement,o._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},resolver:Fe},qe={key:"pinch",engine:class extends Me{constructor(...e){super(...e),ae(this,"ingKey","pinching"),ae(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:o}=this.state;this.state.offset="wheel"===e?ie.add(t,o):[(1+t[0])*o[0],t[1]+o[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,o]=e._movement;if(!e.axis){const i=30*Math.abs(t)-Math.abs(o);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,o=this.ctrl.touchIds;if(t._active&&t._touchIds.every((e=>o.has(e))))return;if(o.size<2)return;this.start(e),t._touchIds=Array.from(o).slice(0,2);const i=_e(e,t._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,o=t._pointerEvents,i=this.ctrl.pointerIds;if(t._active&&Array.from(o.keys()).every((e=>i.has(e))))return;if(o.size<2&&o.set(e.pointerId,e),t._pointerEvents.size<2)return;this.start(e);const n=be(...Array.from(o.values()));n&&this.pinchStart(e,n)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=_e(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const o=be(...Array.from(t.values()));o&&this.pinchMove(e,o)}pinchMove(e,t){const o=this.state,i=o._values[1],n=t.angle-i;let r=0;Math.abs(n)>270&&(r+=Math.sign(n)),this.computeValues([t.distance,t.angle-360*r]),o.origin=t.origin,o.turns=r,o._movement=[o._values[0]/o._initial[0]-1,o._values[1]-o._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((e=>!this.ctrl.touchIds.has(e)))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(o){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const o=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=ie.sub(t._movement,o),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!(Array.isArray(t)?t.find((t=>e[t])):e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const t=this.state;t._delta=[-ke(e)[1]/100*t.offset[0],0],ie.addTo(t._movement,t._delta),Be(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:We},Qe={key:"scroll",engine:class extends Te{constructor(...e){super(...e),ae(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,o=function(e){var t,o;const{scrollX:i,scrollY:n,scrollLeft:r,scrollTop:s}=e.currentTarget;return[null!==(t=null!=i?i:r)&&void 0!==t?t:0,null!==(o=null!=n?n:s)&&void 0!==o?o:0]}(e);t._delta=ie.sub(o,t._values),ie.addTo(t._movement,t._delta),this.computeValues(o),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},resolver:Ue},et={key:"wheel",engine:class extends Te{constructor(...e){super(...e),ae(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=ke(e),ie.addTo(t._movement,t._delta),Be(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:Ve};function tt(e,t){if(null==e)return{};var o,i,n=function(e,t){if(null==e)return{};var o,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)o=r[i],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)o=r[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}const ot={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(De.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},it=["target","eventOptions","window","enabled","transform"];function nt(e={},t){const o={};for(const[i,n]of Object.entries(t))switch(typeof n){case"function":o[i]=n.call(o,e[i],i,e);break;case"object":o[i]=nt(e[i],n);break;case"boolean":n&&(o[i]=e[i])}return o}class rt{constructor(e,t){ae(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,o,i,n){const r=this._listeners,s=function(e,t=""){const o=de[e];return e+(o&&o[t]||t)}(t,o),a=ce(ce({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),n);e.addEventListener(s,i,a);const l=()=>{e.removeEventListener(s,i,a),r.delete(l)};return r.add(l),l}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class st{constructor(){ae(this,"_timeouts",new Map)}add(e,t,o=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,o,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class at{constructor(e){ae(this,"gestures",new Set),ae(this,"_targetEventStore",new rt(this)),ae(this,"gestureEventStores",{}),ae(this,"gestureTimeoutStores",{}),ae(this,"handlers",{}),ae(this,"config",{}),ae(this,"pointerIds",new Set),ae(this,"touchIds",new Set),ae(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&lt(e,"drag");t.wheel&&lt(e,"wheel");t.scroll&&lt(e,"scroll");t.move&&lt(e,"move");t.pinch&&lt(e,"pinch");t.hover&&lt(e,"hover")}(this,e)}setEventIds(e){return fe(e)?(this.touchIds=new Set(xe(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,o={}){const i=e,{target:n,eventOptions:r,window:s,enabled:a,transform:l}=i,c=tt(i,it);if(o.shared=nt({target:n,eventOptions:r,window:s,enabled:a,transform:l},ot),t){const e=Je.get(t);o[t]=nt(ce({shared:o.shared},c),e)}else for(const d in c){const e=Je.get(d);e&&(o[d]=nt(ce({shared:o.shared},c[d]),e))}return o}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,o={};let i;if(!t.target||(i=t.target(),i)){if(t.enabled){for(const t of this.gestures){const n=this.config[t],r=ct(o,n.eventOptions,!!i);if(n.enabled){new(Ke.get(t))(this,e,t).bind(r)}}const n=ct(o,t.eventOptions,!!i);for(const t in this.nativeHandlers)n(t,"",(o=>this.nativeHandlers[t](ce(ce({},this.state.shared),{},{event:o,args:e}))),void 0,!0)}for(const e in o)o[e]=Ce(...o[e]);if(!i)return o;for(const e in o){const{device:t,capture:n,passive:r}=ge(e);this._targetEventStore.add(i,t,"",o[e],{capture:n,passive:r})}}}}function lt(e,t){e.gestures.add(t),e.gestureEventStores[t]=new rt(e,t),e.gestureTimeoutStores[t]=new st}const ct=(e,t,o)=>(i,n,r,s={},a=!1)=>{var l,c;const d=null!==(l=s.capture)&&void 0!==l?l:t.capture,u=null!==(c=s.passive)&&void 0!==c?c:t.passive;let p=a?i:he(i,n,d);o&&u&&(p+="Passive"),e[p]=e[p]||[],e[p].push(r)},dt=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ut(e,t,o,i,n,r){if(!e.has(o))return;if(!Ke.has(i))return;const s=o+"Start",a=o+"End";n[i]=e=>{let i;return e.first&&s in t&&t[s](e),o in t&&(i=t[o](e)),e.last&&a in t&&t[a](e),i},r[i]=r[i]||{}}function pt(e,t){const[o,i,n]=function(e){const t={},o={},i=new Set;for(let n in e)dt.test(n)?(i.add(RegExp.lastMatch),o[n]=e[n]):t[n]=e[n];return[o,t,i]}(e),r={};return ut(n,o,"onDrag","drag",r,t),ut(n,o,"onWheel","wheel",r,t),ut(n,o,"onScroll","scroll",r,t),ut(n,o,"onPinch","pinch",r,t),ut(n,o,"onMove","move",r,t),ut(n,o,"onHover","hover",r,t),{handlers:r,config:t,nativeHandlers:i}}function ht(e){return e.forEach(Ye),function(e,t){const{handlers:o,nativeHandlers:i,config:n}=pt(e,t||{});return function(e,t={},o,i){const n=a.useMemo((()=>new at(e)),[]);if(n.applyHandlers(e,i),n.applyConfig(t,o),a.useEffect(n.effect.bind(n)),a.useEffect((()=>n.clean.bind(n)),[]),void 0===t.target)return n.bind.bind(n)}(o,n,void 0,i)}}const mt=q("assets/geojson/mapBoxStyle.json");function gt(){const[t,o]=e.useState(null),[i,n]=e.useState(null),[a,c]=e.useState(null),d={longitude:-111.686256,latitude:37.884571,zoom:5.51,pitch:32.91,bearing:-1.48,maxPitch:85,minZoom:1,maxZoom:20},[u,p]=e.useState({navajo:!0,hopi:!0,zuni:!0,others:!1}),[h,m]=e.useState(!1),[g,f]=e.useState(!0),[v,y]=e.useState(1),[b,_]=e.useState(0),[w,S]=e.useState(0),[k,j]=e.useState(0),[P,C]=e.useState(1),E=e.useCallback((e=>{p((t=>({...t,[e]:!t[e]})))}),[]),M=e.useCallback((()=>{const e=u.navajo&&u.hopi&&u.zuni&&u.others;p({navajo:!e,hopi:!e,zuni:!e,others:!e})}),[u]),T=a||d,{gestureBindings:z,goToHomeView:L}=function(e,t,o,i){const n={longitude:-111.686256,latitude:37.884571,zoom:5.51,pitch:32.91,bearing:-1.48,maxPitch:85,minZoom:1,maxZoom:20},r=()=>{t&&t(null);const r=3e3;o&&o(!0),setTimeout((()=>{i&&i(1)}),2700),e({...n,transitionDuration:r,transitionInterpolator:new l({speed:1.2,curve:1.5,screenSpeed:15,maxDuration:r}),transitionEasing:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2})};return{gestureBindings:(s={onDrag:({delta:[e,t],direction:[o],touches:i,first:n,movement:[s]})=>{3===i&&o<0?s<-100&&r():1===i&&o<0&&s<-200&&r()}},ht([Ge,qe,Qe,et,$e,Xe])(s,a||{})),goToHomeView:r};var s,a}(c,n,f,y),I=e.useRef(null),A=e.useRef(null),O=e.useCallback((e=>{var t;try{const o=ee(e);if(!o)return;const i=3e3;setTimeout((()=>{n(e),_(0),S(0),j(0),C(1)}),i-500),p({navajo:!1,hopi:!1,zuni:!1,others:!1}),y(0),setTimeout((()=>{f(!1)}),300);const r=null==(t=o.camera)?void 0:t.viewpoint;if(!r)return;let s=o.camera.pitch||60;s<0&&(s=0),s>85&&(s=85),document.body.style.backgroundColor="rgba(0,255,0,0.1)",setTimeout((()=>document.body.style.backgroundColor=""),100);const a={longitude:r.longitude,latitude:r.latitude,zoom:o.camera.zoom||15,pitch:s,bearing:o.camera.bearing||0,transitionDuration:i,transitionInterpolator:new l({speed:1.2,curve:1.5,screenSpeed:15,maxDuration:i}),transitionEasing:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2};c(a)}catch(i){o(`Failed to select photo: ${i.message}`)}}),[]),R=e.useMemo((()=>{const e=[oe({onPhotoSelect:O,selectedPhotoId:i})];if(i){const o=ee(i);if(o){const i={...o,overlay:{...o.overlay,customOffsetX:b,customOffsetY:w,customRotationY:k,scale:o.overlay.scale?o.overlay.scale*P:P}};try{const t=function(e,t=.5){var o,i,n;if(!e||!e.overlay.bounds)return null;const a=[e.overlay.bounds[0][0],e.overlay.bounds[0][1],e.overlay.bounds[1][0],e.overlay.bounds[1][1]],l=1e-4,c=e.overlay.customOffsetX?e.overlay.customOffsetX*l:0,d=e.overlay.customOffsetY?e.overlay.customOffsetY*l:0,u=[a[0]+c,a[1]+d,a[2]+c,a[3]+d],p=(u[0]+u[2])/2,h=(u[1]+u[3])/2,m=e.overlay.aspect||1.5,g=e.overlay.scale||1,f=Math.abs(a[2]-a[0]),v=Math.abs(a[3]-a[1]);let y,b;f/v>m?(y=v*m,b=v):(y=f,b=f/m),y*=g,b*=g;const x=(null==(o=e.camera)?void 0:o.bearing)||0,_=(null==(i=e.camera)?void 0:i.pitch)||0,w=(null==(n=e.overlay)?void 0:n.customRotationY)||0,S=[p-y/2,h-b/2,p+y/2,h+b/2],k=new Image;k.crossOrigin="anonymous";const j=e.image_url.startsWith("http")?e.image_url:q(e.image_url.replace(/^\//,""));k.src=j,k.onload=()=>{},k.onerror=e=>{};let P=null;try{P=new r,P.translate([p,h,0]),P.rotateX(Math.PI/2),0!==x&&P.rotateZ(x*Math.PI/180),0!==w&&P.rotateY(w*Math.PI/180),0!==_&&P.rotateX(_*Math.PI/180),P.translate([-p,-h,0])}catch(C){}return new s({id:`photo-overlay-${e.id}`,bounds:S,image:j,opacity:t,modelMatrix:P,parameters:{depthTest:!1}})}(i,.8);t&&e.push(t)}catch(t){}}}return e}),[i,O,b,w,k,P]),D=i?ee(i):null;return x.jsxs("div",{ref:I,style:{width:"100vw",height:"100vh",position:"relative",touchAction:"none"},...z(),children:[x.jsx("div",{onClick:L,style:{position:"absolute",bottom:"5vw",right:"5vw",zIndex:15,background:"transparent",border:"none",borderRadius:"8px",width:"128px",height:"128px",overflow:"visible",cursor:"pointer"},title:"Return to home view (you can also swipe left with three fingers or long drag left)",children:x.jsxs("div",{style:{width:"120px",height:"120px",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"4px",position:"absolute",top:"4px",left:"4px",backgroundColor:"transparent",overflow:"hidden"},children:[x.jsx("div",{style:{position:"absolute",top:-4,left:-4,width:"calc(100% + 8px)",height:"calc(100% + 8px)",borderRadius:"8px",border:"4px solid rgb(255, 255, 255)",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",pointerEvents:"none",zIndex:2}}),x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:`url(https://api.mapbox.com/styles/v1/mapbox/satellite-v9/static/-110.2,36.5,4.5,0/120x120@2x?attribution=false&logo=false&access_token=${X})`,backgroundSize:"cover",backgroundPosition:"center",opacity:1}}),x.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:[x.jsx("svg",{width:"120",height:"120",viewBox:"0 0 120 120",style:{position:"absolute",top:0,left:0},children:x.jsx("path",{d:"M22 42 C38 30 50 33 60 33 C75 33 90 42 105 48 C102 60 97 72 90 82 C75 90 60 87 38 75 C22 60 22 42 22 42 Z",fill:"hsla(0, 99%, 61%, 0.5)",strokeWidth:"1.5",stroke:"hsl(0, 99%, 41%)"})}),x.jsx("svg",{width:"120",height:"120",viewBox:"0 0 120 120",style:{position:"absolute",top:0,left:0},children:x.jsx("circle",{cx:"60",cy:"57",r:"12",fill:"hsla(294, 66%, 34%, 0.5)",strokeWidth:"1.5",stroke:"hsl(294, 66%, 24%)"})}),x.jsx("svg",{width:"120",height:"120",viewBox:"0 0 120 120",style:{position:"absolute",top:0,left:0},children:x.jsx("path",{d:"M38 72 L57 82 L68 72 L53 60 Z",fill:"hsla(249, 70%, 59%, 0.5)",strokeWidth:"1.5",stroke:"hsl(249, 70%, 39%)"})})]}),x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to bottom, rgba(255,255,255,0.1) 0%, rgba(0,0,0,0.1) 100%)",pointerEvents:"none"}}),x.jsx("div",{style:{position:"absolute",border:"1px solid rgba(0, 0, 0, 0.5)",backgroundColor:"rgba(255, 255, 255, 1)",borderRadius:"50%",width:"10px",height:"10px",transform:"translate(-50%, -50%)",left:`${Math.min(Math.max((T.longitude+118)/16*100,0),100)}%`,top:`${Math.min(Math.max((45-T.latitude)/15*100,0),100)}%`,pointerEvents:"none",transition:"all 0.3s ease-out",boxShadow:"0 0 4px rgba(0, 0, 0, 0.5)",zIndex:1}})]})}),x.jsxs("div",{style:{position:"absolute",top:"2vw",left:"2vw",zIndex:10},children:[x.jsx("h1",{className:"geographica-hand",style:{margin:0,padding:0,color:"white",fontSize:"6rem",letterSpacing:"0em",textShadow:"3px 3px 6px rgba(0,0,0,0.6)",lineHeight:"1.1"},children:"Tied To The Land"}),x.jsx("h2",{className:"aldine-regular",style:{margin:"0.5rem 0 0 0",padding:0,color:"white",fontSize:"2.5rem",maxWidth:"45vw",textShadow:"2px 2px 4px rgba(0,0,0,0.6)",lineHeight:"1.2"},children:"Explore the Jackson-Hillers photographs situated in original Indigenous territories and their history."})]}),g&&x.jsxs("div",{style:{position:"absolute",bottom:"5vw",left:"5vw",zIndex:10,background:"white",padding:"10px",borderRadius:"4px",boxShadow:"0 0 10px rgba(0,0,0,0.3)",opacity:v,transition:"opacity 300ms ease-in-out",pointerEvents:0===v?"none":"auto"},children:[x.jsx("h3",{className:"aldine-bold",style:{margin:"0 0 10px 0",fontSize:"20px"},children:"Indigenous Territories & Expeditions"}),x.jsxs("div",{className:"aldine-text",style:{fontSize:"12px",marginBottom:"15px"},children:[x.jsxs("div",{children:[x.jsx("span",{style:{color:"hsla(0, 99%, 61%, 0.83)",fontWeight:"bold"},children:"▬▬▬"})," Hillers Expedition"]}),x.jsxs("div",{children:[x.jsx("span",{style:{color:"hsl(199, 100%, 43%)",fontWeight:"bold"},children:"▬▬▬"})," Jackson Expedition"]}),x.jsxs("div",{children:[x.jsx("span",{style:{color:"hsla(54, 72%, 49%, 0.6)",fontWeight:"bold"},children:"▬▬▬"})," Travel Routes"]}),x.jsxs("div",{children:[x.jsx("span",{style:{color:"hsl(54, 100%, 50%)",fontWeight:"bold"},children:"●"})," Major Cities"]}),x.jsxs("div",{children:[x.jsx("span",{style:{color:"hsl(30, 100%, 50%)",fontWeight:"bold"},children:"●"})," General Photo Locations"]}),x.jsxs("div",{children:[x.jsx("span",{style:{color:"rgb(255, 87, 51)",fontWeight:"bold"},children:"●"})," Jackson Photos"]}),x.jsxs("div",{children:[x.jsx("span",{style:{color:"rgb(75, 144, 226)",fontWeight:"bold"},children:"●"})," Hillers Photos"]})]}),x.jsxs("div",{style:{borderTop:"1px solid #ddd",paddingTop:"8px",marginTop:"5px"},children:[x.jsx("h4",{className:"aldine-bold",style:{margin:"0 0 10px 0",fontSize:"20px"},children:"Territory Visibility"}),x.jsxs("div",{className:"aldine-text",style:{display:"flex",flexDirection:"column",gap:"5px",fontSize:"12px"},children:[x.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[x.jsx("input",{type:"checkbox",checked:u.navajo,onChange:()=>E("navajo"),style:{marginRight:"5px"}}),x.jsx("span",{className:"aldine-regular",style:{color:"hsla(0, 99%, 61%, 0.83)"},children:"Diné (Navajo)"})]}),x.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[x.jsx("input",{type:"checkbox",checked:u.hopi,onChange:()=>E("hopi"),style:{marginRight:"5px"}}),x.jsx("span",{className:"aldine-regular",style:{color:"hsla(294, 66%, 34%, 0.83)"},children:"Hopi"})]}),x.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[x.jsx("input",{type:"checkbox",checked:u.zuni,onChange:()=>E("zuni"),style:{marginRight:"5px"}}),x.jsx("span",{className:"aldine-regular",style:{color:"hsla(249, 70%, 59%, 0.83)"},children:"Zuni"})]}),x.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[x.jsx("input",{type:"checkbox",checked:u.others,onChange:()=>E("others"),style:{marginRight:"5px"}}),x.jsx("span",{className:"aldine-regular",style:{color:"hsla(156, 66%, 34%, 0.83)"},children:"Other Territories"})]}),x.jsx("button",{onClick:M,style:{marginTop:"5px",padding:"3px",fontSize:"11px",background:"#f0f0f0",border:"1px solid #ccc",borderRadius:"3px",cursor:"pointer"},children:u.navajo&&u.hopi&&u.zuni&&u.others?"Hide All":"Show All"}),x.jsx("div",{style:{borderTop:"1px solid #ddd",marginTop:"10px",paddingTop:"10px"},children:x.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[x.jsx("input",{type:"checkbox",checked:h,onChange:()=>m(!h),style:{marginRight:"5px"}}),x.jsx("span",{className:"aldine-regular",children:"Show Mapbox Expedition Markers"})]})})]})]})]}),t&&x.jsxs("div",{style:{position:"absolute",top:50,left:10,zIndex:10,background:"red",color:"white",padding:"10px"},children:["Error: ",t]}),D&&x.jsxs("div",{style:{position:"absolute",top:10,right:10,zIndex:10,background:"rgba(255, 255, 255, 0.9)",padding:"10px",borderRadius:"4px",maxWidth:"320px",boxShadow:"0 0 10px rgba(0,0,0,0.3)",maxHeight:"90vh",overflowY:"auto",animation:"fadeIn 500ms ease-in-out forwards"},children:[x.jsx("h3",{className:"aldine-bold",style:{margin:"0 0 8px 0",fontSize:"18px"},children:D.name}),x.jsxs("p",{className:"aldine-text",style:{margin:"0 0 5px 0",fontSize:"14px"},children:["Photographer: ",D.photographer,", ",D.year]}),x.jsx("div",{style:{margin:"10px 0",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",maxHeight:"250px",display:"flex",justifyContent:"center",alignItems:"center",background:"#f5f5f5"},children:x.jsx("img",{src:D.image_url.startsWith("http")?D.image_url:q(D.image_url.replace(/^\//,"")),alt:D.name,style:{maxWidth:"100%",maxHeight:"250px",objectFit:"contain"}})}),x.jsx("p",{className:"aldine-text",style:{margin:"5px 0",fontSize:"12px"},children:D.description}),x.jsxs("div",{className:"aldine-text",style:{fontSize:"11px",color:"#666",margin:"5px 0"},children:[x.jsxs("div",{children:["Location: ",D.coordinates.latitude.toFixed(4),", ",D.coordinates.longitude.toFixed(4)]}),x.jsxs("div",{children:["Elevation: ",D.elevation_feet,"ft (",D.elevation_meters,"m)"]}),x.jsxs("div",{children:["Camera Zoom: ",D.camera.zoom]})]}),x.jsxs("div",{style:{marginTop:"10px",borderTop:"1px solid #ddd",paddingTop:"8px"},children:[x.jsx("h4",{className:"aldine-bold",style:{margin:"0 0 8px 0",fontSize:"16px"},children:"Adjust Photo Position:"}),x.jsxs("div",{className:"aldine-text",style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[x.jsx("label",{style:{width:"80px",fontSize:"12px"},children:"Position X:"}),x.jsx("input",{type:"range",min:"-50",max:"50",value:b,onChange:e=>_(Number(e.target.value)),style:{flex:1}}),x.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",width:"30px"},children:b})]}),x.jsxs("div",{className:"aldine-text",style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[x.jsx("label",{style:{width:"80px",fontSize:"12px"},children:"Position Y:"}),x.jsx("input",{type:"range",min:"-50",max:"50",value:w,onChange:e=>S(Number(e.target.value)),style:{flex:1}}),x.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",width:"30px"},children:w})]}),x.jsxs("div",{className:"aldine-text",style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[x.jsx("label",{style:{width:"80px",fontSize:"12px"},children:"Rotation:"}),x.jsx("input",{type:"range",min:"-180",max:"180",value:k,onChange:e=>j(Number(e.target.value)),style:{flex:1}}),x.jsxs("span",{style:{marginLeft:"5px",fontSize:"12px",width:"30px"},children:[k,"°"]})]}),x.jsxs("div",{className:"aldine-text",style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[x.jsx("label",{style:{width:"80px",fontSize:"12px"},children:"Scale:"}),x.jsx("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:P,onChange:e=>C(Number(e.target.value)),style:{flex:1}}),x.jsxs("span",{style:{marginLeft:"5px",fontSize:"12px",width:"30px"},children:[P,"x"]})]}),x.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",flexWrap:"wrap"},children:[x.jsx("button",{onClick:()=>{_(0),S(0),j(0),C(1)},style:{padding:"5px 10px",background:"#f0f0f0",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Reset Adjustments"}),x.jsx("button",{onClick:()=>{p({navajo:!0,hopi:!0,zuni:!0,others:!1})},style:{padding:"5px 10px",background:"#f8c96d",border:"1px solid #dda33a",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Show Territories"}),x.jsx("button",{onClick:()=>n(null),style:{padding:"5px 10px",background:"#4a90e2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Close"})]})]})]}),x.jsx($,{styleUrl:mt,layers:R,viewState:a,onViewStateChange:({viewState:e})=>{c(e)},territoriesVisible:u,showMapboxMarkers:h,deckRef:A})]})}_.createRoot(document.getElementById("root")).render(x.jsx(gt,{}));
